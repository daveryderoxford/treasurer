import{$ as Nl,Aa as Kl,Ab as gu,B as Al,Ba as Ql,C as Mn,Ca as Wl,D as Ct,Da as Ln,E as Cl,Ea as Hl,Fa as Yl,Ga as Xl,H as Sl,Ha as Jl,Ia as Zl,Ja as Lt,Ka as tu,La as eu,N as xl,O as Dl,P as Rl,Q as Pl,Qa as nu,R as kl,Ra as ru,S as Ms,T as zr,Ta as iu,W as Gr,Z as Vl,aa as Ol,bb as Fs,cb as su,db as ou,ea as Ml,eb as qn,fb as Bn,gb as uu,ha as Fl,hb as hu,i as Il,ib as du,jb as Qr,k as qr,kb as rn,l as xe,lb as St,m as Vs,mb as Bs,n as Ns,nb as js,ob as sn,pa as Ll,qa as ql,ra as Fn,s as Tl,sa as Bl,t as Os,ta as jl,u as El,ua as Ul,v as Br,va as Ft,w as jr,wa as zl,xa as ie,xb as mu,y as bl,ya as Gl,yb as fu,z as Ur,za as $l}from"./chunk-YGAWG4U5.js";import{$ as Vn,$b as en,$c as Kr,Bb as he,Ca as Nn,Cb as wt,Cc as Lr,Db as xs,E as Ye,Eb as Ds,Fa as q,Fb as ee,Ga as bt,Gb as hl,H as Xe,Ha as On,Hb as dl,Hc as yl,I as Zt,Ib as Rs,Jc as vl,Mb as L,Nb as B,Nc as wl,O as be,Oa as al,Ob as Mt,Pa as bs,Qa as As,R as ws,Ra as cl,Rb as ml,Sa as Nt,Sb as Ps,Ub as At,Vc as Ls,Wb as Ce,Wc as qs,Xb as fl,Y as il,Yb as ks,Yc as $r,Zc as au,_ as kt,_b as Fr,a as Jt,aa as Ae,ac as ne,ad as cu,b as nl,bc as re,bd as lu,cc as gl,da as sl,dc as It,e as y,ea as ue,ec as de,fc as pl,gb as rt,h as rl,hb as C,jb as ll,jc as _l,k as ft,ka as et,kc as dt,la as ht,ma as yt,na as Je,oa as Is,ob as ul,pa as Ts,pb as Cs,qa as Es,qb as Ze,ra as ol,rb as Ss,sa as te,tb as Ot,v as Or,va as Vt,wa as vt,wb as tn,wc as Se,xb as Mr,xc as nn,ya as nt,z as Ee}from"./chunk-NXMLWIY6.js";var Hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dt={},p,lo=lo||{},S=Hm||self;function ai(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function tr(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function Ym(e){return Object.prototype.hasOwnProperty.call(e,Us)&&e[Us]||(e[Us]=++Xm)}var Us="closure_uid_"+(1e9*Math.random()>>>0),Xm=0;function Jm(e,t,n){return e.call.apply(e.bind,arguments)}function Zm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function it(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?it=Jm:it=Zm,it.apply(null,arguments)}function Wr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Y(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function me(){this.s=this.s,this.o=this.o}var tf=0;me.prototype.s=!1;me.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),tf!=0)&&Ym(this)};me.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var xu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function uo(e){let t=e.length;if(0<t){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function pu(e,t){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(ai(r)){let i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function st(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}st.prototype.h=function(){this.defaultPrevented=!0};var ef=function(){if(!S.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let n=()=>{};S.addEventListener("test",n,t),S.removeEventListener("test",n,t)}catch{}return e}();function Kn(e){return/^[\s\xa0]*$/.test(e)}function ci(){var e=S.navigator;return e&&(e=e.userAgent)?e:""}function qt(e){return ci().indexOf(e)!=-1}function ho(e){return ho[" "](e),e}ho[" "]=function(){};function nf(e,t){var n=$f;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var rf=qt("Opera"),ln=qt("Trident")||qt("MSIE"),Du=qt("Edge"),Qs=Du||ln,Ru=qt("Gecko")&&!(ci().toLowerCase().indexOf("webkit")!=-1&&!qt("Edge"))&&!(qt("Trident")||qt("MSIE"))&&!qt("Edge"),sf=ci().toLowerCase().indexOf("webkit")!=-1&&!qt("Edge");function Pu(){var e=S.document;return e?e.documentMode:void 0}var Ws;t:{if(Hr="",Yr=function(){var e=ci();if(Ru)return/rv:([^\);]+)(\)|;)/.exec(e);if(Du)return/Edge\/([\d\.]+)/.exec(e);if(ln)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(sf)return/WebKit\/(\S+)/.exec(e);if(rf)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),Yr&&(Hr=Yr?Yr[1]:""),ln&&(Xr=Pu(),Xr!=null&&Xr>parseFloat(Hr))){Ws=String(Xr);break t}Ws=Hr}var Hr,Yr,Xr,Hs;S.document&&ln?(zs=Pu(),Hs=zs||parseInt(Ws,10)||void 0):Hs=void 0;var zs,of=Hs;function Qn(e,t){if(st.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ru){t:{try{ho(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:af[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Qn.$.h.call(this)}}Y(Qn,st);var af={2:"touch",3:"pen",4:"mouse"};Qn.prototype.h=function(){Qn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var er="closure_listenable_"+(1e6*Math.random()|0),cf=0;function lf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++cf,this.fa=this.ia=!1}function li(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function mo(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function uf(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function ku(e){let t={};for(let n in e)t[n]=e[n];return t}var _u="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vu(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<_u.length;s++)n=_u[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ui(e){this.src=e,this.g={},this.h=0}ui.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=Xs(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new lf(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function Ys(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=xu(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(li(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Xs(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var fo="closure_lm_"+(1e6*Math.random()|0),Gs={};function Nu(e,t,n,r,i){if(r&&r.once)return Mu(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Nu(e,t[s],n,r,i);return null}return n=_o(n),e&&e[er]?e.O(t,n,tr(r)?!!r.capture:!!r,i):Ou(e,t,n,!1,r,i)}function Ou(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=tr(i)?!!i.capture:!!i,a=po(e);if(a||(e[fo]=a=new ui(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=hf(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ef||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Lu(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function hf(){function e(n){return t.call(e.src,e.listener,n)}let t=df;return e}function Mu(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Mu(e,t[s],n,r,i);return null}return n=_o(n),e&&e[er]?e.P(t,n,tr(r)?!!r.capture:!!r,i):Ou(e,t,n,!0,r,i)}function Fu(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Fu(e,t[s],n,r,i);else r=tr(r)?!!r.capture:!!r,n=_o(n),e&&e[er]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=Xs(s,n,r,i),-1<n&&(li(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=po(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Xs(t,n,r,i)),(n=-1<e?t[e]:null)&&go(n))}function go(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[er])Ys(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Lu(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=po(t))?(Ys(n,e),n.h==0&&(n.src=null,t[fo]=null)):li(e)}}}function Lu(e){return e in Gs?Gs[e]:Gs[e]="on"+e}function df(e,t){if(e.fa)e=!0;else{t=new Qn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&go(e),e=n.call(r,t)}return e}function po(e){return e=e[fo],e instanceof ui?e:null}var $s="__closure_events_fn_"+(1e9*Math.random()>>>0);function _o(e){return typeof e=="function"?e:(e[$s]||(e[$s]=function(t){return e.handleEvent(t)}),e[$s])}function H(){me.call(this),this.i=new ui(this),this.S=this,this.J=null}Y(H,me);H.prototype[er]=!0;H.prototype.removeEventListener=function(e,t,n,r){Fu(this,e,t,n,r)};function Z(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new st(t,e);else if(t instanceof st)t.target=t.target||e;else{var i=t;t=new st(r,e),Vu(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Jr(o,r,!0,t)&&i}if(o=t.g=e,i=Jr(o,r,!0,t)&&i,i=Jr(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=Jr(o,r,!1,t)&&i}H.prototype.N=function(){if(H.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)li(n[r]);delete e.g[t],e.h--}}this.J=null};H.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};H.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Jr(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ys(e.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var yo=S.JSON.stringify,Js=class{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function mf(){var e=vo;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Zs=class{constructor(){this.h=this.g=null}add(t,n){let r=qu.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}},qu=new Js(()=>new to,e=>e.reset()),to=class{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function ff(e){var t=1;e=e.split(":");let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function gf(e){S.setTimeout(()=>{throw e},0)}var Wn,Hn=!1,vo=new Zs,Bu=()=>{let e=S.Promise.resolve(void 0);Wn=()=>{e.then(pf)}},pf=()=>{for(var e;e=mf();){try{e.h.call(e.g)}catch(n){gf(n)}var t=qu;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hn=!1};function hi(e,t){H.call(this),this.h=e||1,this.g=t||S,this.j=it(this.qb,this),this.l=Date.now()}Y(hi,H);p=hi.prototype;p.ga=!1;p.T=null;p.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Z(this,"tick"),this.ga&&(wo(this),this.start()))}};p.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function wo(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}p.N=function(){hi.$.N.call(this),wo(this),delete this.g};function Io(e,t,n){if(typeof e=="function")n&&(e=it(e,n));else if(e&&typeof e.handleEvent=="function")e=it(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:S.setTimeout(e,t||0)}function ju(e){e.g=Io(()=>{e.g=null,e.i&&(e.i=!1,ju(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var eo=class extends me{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ju(this)}N(){super.N(),this.g&&(S.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Yn(e){me.call(this),this.h=e,this.g={}}Y(Yn,me);var yu=[];function Uu(e,t,n,r){Array.isArray(n)||(n&&(yu[0]=n.toString()),n=yu);for(var i=0;i<n.length;i++){var s=Nu(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function zu(e){mo(e.g,function(t,n){this.g.hasOwnProperty(n)&&go(t)},e),e.g={}}Yn.prototype.N=function(){Yn.$.N.call(this),zu(this)};Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function di(){this.g=!0}di.prototype.Ea=function(){this.g=!1};function _f(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function yf(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function an(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+wf(e,n)+(r?" "+r:"")})}function vf(e,t){e.info(function(){return"TIMEOUT: "+t})}di.prototype.info=function(){};function wf(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return yo(n)}catch{return t}}var ke={},vu=null;function mi(){return vu=vu||new H}ke.Ta="serverreachability";function Gu(e){st.call(this,ke.Ta,e)}Y(Gu,st);function Xn(e){let t=mi();Z(t,new Gu(t))}ke.STAT_EVENT="statevent";function $u(e,t){st.call(this,ke.STAT_EVENT,e),this.stat=t}Y($u,st);function ct(e){let t=mi();Z(t,new $u(t,e))}ke.Ua="timingevent";function Ku(e,t){st.call(this,ke.Ua,e),this.size=t}Y(Ku,st);function nr(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return S.setTimeout(function(){e()},t)}var fi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function To(){}To.prototype.h=null;function wu(e){return e.h||(e.h=e.i())}function Wu(){}var rr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Eo(){st.call(this,"d")}Y(Eo,st);function bo(){st.call(this,"c")}Y(bo,st);var no;function gi(){}Y(gi,To);gi.prototype.g=function(){return new XMLHttpRequest};gi.prototype.i=function(){return{}};no=new gi;function ir(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Yn(this),this.P=If,e=Qs?125:void 0,this.V=new hi(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Hu}function Hu(){this.i=null,this.g="",this.h=!1}var If=45e3,Yu={},ro={};p=ir.prototype;p.setTimeout=function(e){this.P=e};function io(e,t,n){e.L=1,e.A=_i(oe(t)),e.u=n,e.S=!0,Xu(e,null)}function Xu(e,t){e.G=Date.now(),sr(e),e.B=oe(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),sh(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Hu,e.g=Ch(e.l,n?t:null,!e.u),0<e.O&&(e.M=new eo(it(e.Pa,e,e.g),e.O)),Uu(e.U,e.g,"readystatechange",e.nb),t=e.I?ku(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Xn(),_f(e.j,e.v,e.B,e.m,e.W,e.u)}p.nb=function(e){e=e.target;let t=this.M;t&&Bt(e)==3?t.l():this.Pa(e)};p.Pa=function(e){try{if(e==this.g)t:{let u=Bt(this.g);var t=this.g.Ia();let h=this.g.da();if(!(3>u)&&(u!=3||Qs||this.g&&(this.h.h||this.g.ja()||bu(this.g)))){this.J||u!=4||t==7||(t==8||0>=h?Xn(3):Xn(2)),pi(this);var n=this.g.da();this.ca=n;e:if(Ju(this)){var r=bu(this.g);e="";var i=r.length,s=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){De(this),$n(this);var o="";break e}this.h.i=new S.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,yf(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kn(a)){var l=a;break e}}l=null}if(n=l)an(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,so(this,n);else{this.i=!1,this.s=3,ct(12),De(this),$n(this);break t}}this.S?(Zu(this,u,o),Qs&&this.i&&u==3&&(Uu(this.U,this.V,"tick",this.mb),this.V.start())):(an(this.j,this.m,o,null),so(this,o)),u==4&&De(this),this.i&&!this.J&&(u==4?Th(this.l,this):(this.i=!1,sr(this)))}else Uf(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),De(this),$n(this)}}}catch{}finally{}};function Ju(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function Zu(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=Tf(e,n),i==ro){t==4&&(e.s=4,ct(14),r=!1),an(e.j,e.m,null,"[Incomplete Response]");break}else if(i==Yu){e.s=4,ct(15),an(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else an(e.j,e.m,i,null),so(e,i);Ju(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,ct(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ro(t),t.M=!0,ct(11))):(an(e.j,e.m,n,"[Invalid Chunked Response]"),De(e),$n(e))}p.mb=function(){if(this.g){var e=Bt(this.g),t=this.g.ja();this.o<t.length&&(pi(this),Zu(this,e,t),this.i&&e!=4&&sr(this))}};function Tf(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?ro:(n=Number(t.substring(n,r)),isNaN(n)?Yu:(r+=1,r+n>t.length?ro:(t=t.slice(r,r+n),e.o=r+n,t)))}p.cancel=function(){this.J=!0,De(this)};function sr(e){e.Y=Date.now()+e.P,th(e,e.P)}function th(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=nr(it(e.lb,e),t)}function pi(e){e.C&&(S.clearTimeout(e.C),e.C=null)}p.lb=function(){this.C=null;let e=Date.now();0<=e-this.Y?(vf(this.j,this.B),this.L!=2&&(Xn(),ct(17)),De(this),this.s=2,$n(this)):th(this,this.Y-e)};function $n(e){e.l.H==0||e.J||Th(e.l,e)}function De(e){pi(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,wo(e.V),zu(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function so(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||oo(n.i,e))){if(!e.K&&oo(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)ri(n),wi(n);else break t;Do(n),ct(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=nr(it(n.ib,n),6e3));if(1>=ch(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Re(n,11)}else if((e.K||n.g==e)&&ri(n),!Kn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let h=l[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=e.g;if(f){let E=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Ao(s,s.h),s.h=null))}if(r.F){let T=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,M(r.I,r.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=Ah(r,r.J?r.pa:null,r.Y),o.K){lh(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(pi(a),sr(a)),r.g=o}else wh(r);0<n.j.length&&Ii(n)}else l[0]!="stop"&&l[0]!="close"||Re(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Re(n,7):xo(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Xn(4)}catch{}}function Ef(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(ai(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function bf(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(ai(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(let r in e)t[n++]=r;return t}}}function eh(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(ai(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=bf(e),r=Ef(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var nh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Af(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Pe(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Pe){this.h=e.h,ei(this,e.j),this.s=e.s,this.g=e.g,ni(this,e.m),this.l=e.l;var t=e.i,n=new Jn;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Iu(this,n),this.o=e.o}else e&&(t=String(e).match(nh))?(this.h=!1,ei(this,t[1]||"",!0),this.s=zn(t[2]||""),this.g=zn(t[3]||"",!0),ni(this,t[4]),this.l=zn(t[5]||"",!0),Iu(this,t[6]||"",!0),this.o=zn(t[7]||"")):(this.h=!1,this.i=new Jn(null,this.h))}Pe.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gn(t,Tu,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Gn(t,Tu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Gn(n,n.charAt(0)=="/"?xf:Sf,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Gn(n,Rf)),e.join("")};function oe(e){return new Pe(e)}function ei(e,t,n){e.j=n?zn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ni(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Iu(e,t,n){t instanceof Jn?(e.i=t,Pf(e.i,e.h)):(n||(t=Gn(t,Df)),e.i=new Jn(t,e.h))}function M(e,t,n){e.i.set(t,n)}function _i(e){return M(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gn(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,Cf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Cf(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Tu=/[#\/\?@]/g,Sf=/[#\?:]/g,xf=/[#\?]/g,Df=/[#\?@]/g,Rf=/#/g;function Jn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function fe(e){e.g||(e.g=new Map,e.h=0,e.i&&Af(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}p=Jn.prototype;p.add=function(e,t){fe(this),this.i=null,e=un(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function rh(e,t){fe(e),t=un(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ih(e,t){return fe(e),t=un(e,t),e.g.has(t)}p.forEach=function(e,t){fe(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};p.ta=function(){fe(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){let i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};p.Z=function(e){fe(this);let t=[];if(typeof e=="string")ih(this,e)&&(t=t.concat(this.g.get(un(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};p.set=function(e,t){return fe(this),this.i=null,e=un(this,e),ih(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};p.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function sh(e,t,n){rh(e,t),0<n.length&&(e.i=null,e.g.set(un(e,t),uo(n)),e.h+=n.length)}p.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function un(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Pf(e,t){t&&!e.j&&(fe(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(rh(this,r),sh(this,i,n))},e)),e.j=t}var kf=class{constructor(e,t){this.g=e,this.map=t}};function oh(e){this.l=e||Vf,S.PerformanceNavigationTiming?(e=S.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(S.g&&S.g.Ka&&S.g.Ka()&&S.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vf=10;function ah(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function ch(e){return e.h?1:e.g?e.g.size:0}function oo(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Ao(e,t){e.g?e.g.add(t):e.h=t}function lh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}oh.prototype.cancel=function(){if(this.i=uh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function uh(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.F);return t}return uo(e.i)}var Nf=class{stringify(e){return S.JSON.stringify(e,void 0)}parse(e){return S.JSON.parse(e,void 0)}};function Of(){this.g=new Nf}function Mf(e,t,n){let r=n||"";try{eh(e,function(i,s){let o=i;tr(i)&&(o=yo(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ff(e,t){let n=new di;if(S.Image){let r=new Image;r.onload=Wr(Zr,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Wr(Zr,n,r,"TestLoadImage: error",!1,t),r.onabort=Wr(Zr,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Wr(Zr,n,r,"TestLoadImage: timeout",!1,t),S.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Zr(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function or(e){this.l=e.ec||null,this.j=e.ob||!1}Y(or,To);or.prototype.g=function(){return new yi(this.l,this.j)};or.prototype.i=function(e){return function(){return e}}({});function yi(e,t){H.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Co,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Y(yi,H);var Co=0;p=yi.prototype;p.open=function(e,t){if(this.readyState!=Co)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Zn(this)};p.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||S).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};p.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ar(this)),this.readyState=Co};p.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof S.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hh(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function hh(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}p.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ar(this):Zn(this),this.readyState==3&&hh(this)}};p.Za=function(e){this.g&&(this.response=this.responseText=e,ar(this))};p.Ya=function(e){this.g&&(this.response=e,ar(this))};p.ka=function(){this.g&&ar(this)};function ar(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Zn(e)}p.setRequestHeader=function(e,t){this.v.append(e,t)};p.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};p.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Zn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var Lf=S.JSON.parse;function j(e){H.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=dh,this.L=this.M=!1}Y(j,H);var dh="",qf=/^https?$/i,Bf=["POST","PUT"];p=j.prototype;p.Oa=function(e){this.M=e};p.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():no.g(),this.C=this.u?wu(this.u):wu(no),this.g.onreadystatechange=it(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){Eu(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=S.FormData&&e instanceof S.FormData,!(0<=xu(Bf,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gh(this),0<this.B&&((this.L=jf(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.ua,this)):this.A=Io(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Eu(this,s)}};function jf(e){return ln&&typeof e.timeout=="number"&&e.ontimeout!==void 0}p.ua=function(){typeof lo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Z(this,"timeout"),this.abort(8))};function Eu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mh(e),vi(e)}function mh(e){e.F||(e.F=!0,Z(e,"complete"),Z(e,"error"))}p.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Z(this,"complete"),Z(this,"abort"),vi(this))};p.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vi(this,!0)),j.$.N.call(this)};p.La=function(){this.s||(this.G||this.v||this.l?fh(this):this.kb())};p.kb=function(){fh(this)};function fh(e){if(e.h&&typeof lo<"u"&&(!e.C[1]||Bt(e)!=4||e.da()!=2)){if(e.v&&Bt(e)==4)Io(e.La,0,e);else if(Z(e,"readystatechange"),Bt(e)==4){e.h=!1;try{let o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(nh)[1]||null;!i&&S.self&&S.self.location&&(i=S.self.location.protocol.slice(0,-1)),r=!qf.test(i?i.toLowerCase():"")}n=r}if(n)Z(e,"complete"),Z(e,"success");else{e.m=6;try{var s=2<Bt(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",mh(e)}}finally{vi(e)}}}}function vi(e,t){if(e.g){gh(e);let n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Z(e,"ready");try{n.onreadystatechange=r}catch{}}}function gh(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(S.clearTimeout(e.A),e.A=null)}p.isActive=function(){return!!this.g};function Bt(e){return e.g?e.g.readyState:0}p.da=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}};p.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};p.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Lf(t)}};function bu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case dh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Uf(e){let t={};e=(e.g&&2<=Bt(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(Kn(e[r]))continue;var n=ff(e[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=t[i]||[];t[i]=s,s.push(n)}uf(t,function(r){return r.join(", ")})}p.Ia=function(){return this.m};p.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ph(e){let t="";return mo(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function So(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=ph(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):M(e,t,n))}function jn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _h(e){this.Ga=0,this.j=[],this.l=new di,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=jn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=jn("baseRetryDelayMs",5e3,e),this.hb=jn("retryDelaySeedMs",1e4,e),this.eb=jn("forwardChannelMaxRetries",2,e),this.xa=jn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new oh(e&&e.concurrentRequestLimit),this.Ja=new Of,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}p=_h.prototype;p.ra=8;p.H=1;function xo(e){if(yh(e),e.H==3){var t=e.W++,n=oe(e.I);if(M(n,"SID",e.K),M(n,"RID",t),M(n,"TYPE","terminate"),cr(e,n),t=new ir(e,e.l,t),t.L=2,t.A=_i(oe(n)),n=!1,S.navigator&&S.navigator.sendBeacon)try{n=S.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&S.Image&&(new Image().src=t.A,n=!0),n||(t.g=Ch(t.l,null),t.g.ha(t.A)),t.G=Date.now(),sr(t)}bh(e)}function wi(e){e.g&&(Ro(e),e.g.cancel(),e.g=null)}function yh(e){wi(e),e.u&&(S.clearTimeout(e.u),e.u=null),ri(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&S.clearTimeout(e.m),e.m=null)}function Ii(e){if(!ah(e.i)&&!e.m){e.m=!0;var t=e.Na;Wn||Bu(),Hn||(Wn(),Hn=!0),vo.add(t,e),e.C=0}}function zf(e,t){return ch(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=nr(it(e.Na,e,t),Eh(e,e.C)),e.C++,!0)}p.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let i=new ir(this,this.l,e),s=this.s;if(this.U&&(s?(s=ku(s),Vu(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break e}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=vh(this,i,t),n=oe(this.I),M(n,"RID",e),M(n,"CVER",22),this.F&&M(n,"X-HTTP-Session-Id",this.F),cr(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(ph(s)))+"&"+t:this.o&&So(n,this.o,s)),Ao(this.i,i),this.bb&&M(n,"TYPE","init"),this.P?(M(n,"$req",t),M(n,"SID","null"),i.aa=!0,io(i,n,null)):io(i,n,t),this.H=2}}else this.H==3&&(e?Au(this,e):this.j.length==0||ah(this.i)||Au(this))};function Au(e,t){var n;t?n=t.m:n=e.W++;let r=oe(e.I);M(r,"SID",e.K),M(r,"RID",n),M(r,"AID",e.V),cr(e,r),e.o&&e.s&&So(r,e.o,e.s),n=new ir(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=vh(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ao(e.i,n),io(n,r,t)}function cr(e,t){e.na&&mo(e.na,function(n,r){M(t,r,n)}),e.h&&eh({},function(n,r){M(t,r,n)})}function vh(e,t,n){n=Math.min(e.j.length,n);var r=e.h?it(e.h.Va,e.h,e):null;t:{var i=e.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=s,0>l)s=Math.max(0,i[c].g-100),a=!1;else try{Mf(u,o,"req"+l+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,r}function wh(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Wn||Bu(),Hn||(Wn(),Hn=!0),vo.add(t,e),e.A=0}}function Do(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=nr(it(e.Ma,e),Eh(e,e.A)),e.A++,!0)}p.Ma=function(){if(this.u=null,Ih(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=nr(it(this.jb,this),e)}};p.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ct(10),wi(this),Ih(this))};function Ro(e){e.B!=null&&(S.clearTimeout(e.B),e.B=null)}function Ih(e){e.g=new ir(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=oe(e.wa);M(t,"RID","rpc"),M(t,"SID",e.K),M(t,"AID",e.V),M(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&M(t,"TO",e.qa),M(t,"TYPE","xmlhttp"),cr(e,t),e.o&&e.s&&So(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=_i(oe(t)),n.u=null,n.S=!0,Xu(n,e)}p.ib=function(){this.v!=null&&(this.v=null,wi(this),Do(this),ct(19))};function ri(e){e.v!=null&&(S.clearTimeout(e.v),e.v=null)}function Th(e,t){var n=null;if(e.g==t){ri(e),Ro(e),e.g=null;var r=2}else if(oo(e.i,t))n=t.F,lh(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=mi(),Z(r,new Ku(r,n)),Ii(e)}else wh(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&zf(e,t)||r==2&&Do(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Re(e,5);break;case 4:Re(e,10);break;case 3:Re(e,6);break;default:Re(e,2)}}}function Eh(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Re(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=it(e.pb,e);n||(n=new Pe("//www.google.com/images/cleardot.gif"),S.location&&S.location.protocol=="http"||ei(n,"https"),_i(n)),Ff(n.toString(),r)}else ct(2);e.H=0,e.h&&e.h.za(t),bh(e),yh(e)}p.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ct(2)):(this.l.info("Failed to ping google.com"),ct(1))};function bh(e){if(e.H=0,e.ma=[],e.h){let t=uh(e.i);(t.length!=0||e.j.length!=0)&&(pu(e.ma,t),pu(e.ma,e.j),e.i.i.length=0,uo(e.j),e.j.length=0),e.h.ya()}}function Ah(e,t,n){var r=n instanceof Pe?oe(n):new Pe(n);if(r.g!="")t&&(r.g=t+"."+r.g),ni(r,r.m);else{var i=S.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Pe(null);r&&ei(s,r),t&&(s.g=t),i&&ni(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&M(r,n,t),M(r,"VER",e.ra),cr(e,r),r}function Ch(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new j(new or({ob:n})):new j(e.va),t.Oa(e.J),t}p.isActive=function(){return!!this.h&&this.h.isActive(this)};function Sh(){}p=Sh.prototype;p.Ba=function(){};p.Aa=function(){};p.za=function(){};p.ya=function(){};p.isActive=function(){return!0};p.Va=function(){};function ii(){if(ln&&!(10<=Number(of)))throw Error("Environmental error: no available transport.")}ii.prototype.g=function(e,t){return new gt(e,t)};function gt(e,t){H.call(this),this.g=new _h(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Kn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kn(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new hn(this)}Y(gt,H);gt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ct(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ah(e,null,e.Y),Ii(e)};gt.prototype.close=function(){xo(this.g)};gt.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=yo(e),e=n);t.j.push(new kf(t.fb++,e)),t.H==3&&Ii(t)};gt.prototype.N=function(){this.g.h=null,delete this.j,xo(this.g),delete this.g,gt.$.N.call(this)};function xh(e){Eo.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(let n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Y(xh,Eo);function Dh(){bo.call(this),this.status=1}Y(Dh,bo);function hn(e){this.g=e}Y(hn,Sh);hn.prototype.Ba=function(){Z(this.g,"a")};hn.prototype.Aa=function(e){Z(this.g,new xh(e))};hn.prototype.za=function(e){Z(this.g,new Dh)};hn.prototype.ya=function(){Z(this.g,"b")};function Gf(){this.blockSize=-1}function xt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Y(xt,Gf);xt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ks(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}xt.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)Ks(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ks(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ks(this,r),i=0;break}}this.h=i,this.i+=t};xt.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function V(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var $f={};function Po(e){return-128<=e&&128>e?nf(e,function(t){return new V([t|0],0>t?-1:0)}):new V([e|0],0>e?-1:0)}function jt(e){if(isNaN(e)||!isFinite(e))return cn;if(0>e)return J(jt(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ao;return new V(t,0)}function Rh(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return J(Rh(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=jt(Math.pow(t,8)),r=cn,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=jt(Math.pow(t,s)),r=r.R(s).add(jt(o))):(r=r.R(n),r=r.add(jt(o)))}return r}var ao=4294967296,cn=Po(0),co=Po(1),Cu=Po(16777216);p=V.prototype;p.ea=function(){if(Tt(this))return-J(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ao+r)*t,t*=ao}return e};p.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(se(this))return"0";if(Tt(this))return"-"+J(this).toString(e);for(var t=jt(Math.pow(e,6)),n=this,r="";;){var i=oi(n,t).g;n=si(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,se(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};p.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function se(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Tt(e){return e.h==-1}p.X=function(e){return e=si(this,e),Tt(e)?-1:se(e)?0:1};function J(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new V(n,~e.h).add(co)}p.abs=function(){return Tt(this)?J(this):this};p.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new V(n,n[n.length-1]&-2147483648?-1:0)};function si(e,t){return e.add(J(t))}p.R=function(e){if(se(this)||se(e))return cn;if(Tt(this))return Tt(e)?J(this).R(J(e)):J(J(this).R(e));if(Tt(e))return J(this.R(J(e)));if(0>this.X(Cu)&&0>e.X(Cu))return jt(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,c=e.D(i)&65535;n[2*r+2*i]+=o*c,ti(n,2*r+2*i),n[2*r+2*i+1]+=s*c,ti(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ti(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ti(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new V(n,0)};function ti(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Un(e,t){this.g=e,this.h=t}function oi(e,t){if(se(t))throw Error("division by zero");if(se(e))return new Un(cn,cn);if(Tt(e))return t=oi(J(e),t),new Un(J(t.g),J(t.h));if(Tt(t))return t=oi(e,J(t)),new Un(J(t.g),t.h);if(30<e.g.length){if(Tt(e)||Tt(t))throw Error("slowDivide_ only works with positive integers.");for(var n=co,r=t;0>=r.X(e);)n=Su(n),r=Su(r);var i=on(n,1),s=on(r,1);for(r=on(r,2),n=on(n,2);!se(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=on(r,1),n=on(n,1)}return t=si(e,i.R(t)),new Un(i,t)}for(i=cn;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=jt(n),o=s.R(t);Tt(o)||0<o.X(e);)n-=r,s=jt(n),o=s.R(t);se(s)&&(s=co),i=i.add(s),e=si(e,o)}return new Un(i,e)}p.gb=function(e){return oi(this,e).h};p.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new V(n,this.h&e.h)};p.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new V(n,this.h|e.h)};p.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new V(n,this.h^e.h)};function Su(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new V(n,e.h)}function on(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new V(i,e.h)}ii.prototype.createWebChannel=ii.prototype.g;gt.prototype.send=gt.prototype.u;gt.prototype.open=gt.prototype.m;gt.prototype.close=gt.prototype.close;fi.NO_ERROR=0;fi.TIMEOUT=8;fi.HTTP_ERROR=6;Qu.COMPLETE="complete";Wu.EventType=rr;rr.OPEN="a";rr.CLOSE="b";rr.ERROR="c";rr.MESSAGE="d";H.prototype.listen=H.prototype.O;j.prototype.listenOnce=j.prototype.P;j.prototype.getLastError=j.prototype.Sa;j.prototype.getLastErrorCode=j.prototype.Ia;j.prototype.getStatus=j.prototype.da;j.prototype.getResponseJson=j.prototype.Wa;j.prototype.getResponseText=j.prototype.ja;j.prototype.send=j.prototype.ha;j.prototype.setWithCredentials=j.prototype.Oa;xt.prototype.digest=xt.prototype.l;xt.prototype.reset=xt.prototype.reset;xt.prototype.update=xt.prototype.j;V.prototype.add=V.prototype.add;V.prototype.multiply=V.prototype.R;V.prototype.modulo=V.prototype.gb;V.prototype.compare=V.prototype.X;V.prototype.toNumber=V.prototype.ea;V.prototype.toString=V.prototype.toString;V.prototype.getBits=V.prototype.D;V.fromNumber=jt;V.fromString=Rh;var Ph=Dt.createWebChannelTransport=function(){return new ii},kh=Dt.getStatEventTarget=function(){return mi()},Ti=Dt.ErrorCode=fi,Vh=Dt.EventType=Qu,Nh=Dt.Event=ke,ko=Dt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},A_=Dt.FetchXmlHttpFactory=or,lr=Dt.WebChannel=Wu,Oh=Dt.XhrIo=j,Mh=Dt.Md5=xt,Ve=Dt.Integer=V;var Fh="@firebase/firestore";var X=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};X.UNAUTHENTICATED=new X(null),X.GOOGLE_CREDENTIALS=new X("google-credentials-uid"),X.FIRST_PARTY=new X("first-party-uid"),X.MOCK_USER=new X("mock-user");var Pn="10.8.0";var qe=new Gl("@firebase/firestore");function ur(){return qe.logLevel}function _(e,...t){if(qe.logLevel<=ie.DEBUG){let n=t.map(wc);qe.debug(`Firestore (${Pn}): ${e}`,...n)}}function Qt(e,...t){if(qe.logLevel<=ie.ERROR){let n=t.map(wc);qe.error(`Firestore (${Pn}): ${e}`,...n)}}function _n(e,...t){if(qe.logLevel<=ie.WARN){let n=t.map(wc);qe.warn(`Firestore (${Pn}): ${e}`,...n)}}function wc(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function b(e="Unexpected state"){let t=`FIRESTORE (${Pn}) INTERNAL ASSERTION FAILED: `+e;throw Qt(t),new Error(t)}function O(e,t){e||b()}function x(e,t){return e}var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends Ul{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rt=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var Si=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Fo=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(X.UNAUTHENTICATED))}shutdown(){}},Lo=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},qo=class{constructor(t){this.t=t,this.currentUser=X.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rt,t.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;t.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{_("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(_("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rt)}},0),o()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(O(typeof r.accessToken=="string"),new Si(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return O(t===null||typeof t=="string"),new X(t)}},Bo=class{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=X.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jo=class{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Bo(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(X.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Uo=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},zo=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let r=s=>{s.error!=null&&_("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,_("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};let i=s=>{_("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(O(typeof n.token=="string"),this.R=n.token,new Uo(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Kf(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var xi=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";for(;r.length<20;){let i=Kf(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}};function k(e,t){return e<t?-1:e>t?1:0}function yn(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}var tt=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new w(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new w(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new w(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?k(this.nanoseconds,t.nanoseconds):k(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var D=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new tt(0,0))}static max(){return new e(new tt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Di=class e{constructor(t,n,r){n===void 0?n=0:n>t.length&&b(),r===void 0?r=t.length-n:r>t.length-n&&b(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},z=class e extends Di{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let r of t){if(r.indexOf("//")>=0)throw new w(m.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new e(n)}static emptyPath(){return new e([])}},Qf=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_t=class e extends Di{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(t){return Qf.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new w(m.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<t.length;){let a=t[i];if(a==="\\"){if(i+1===t.length)throw new w(m.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new w(m.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var I=class e{constructor(t){this.path=t}static fromPath(t){return new e(z.fromString(t))}static fromName(t){return new e(z.fromString(t).popFirst(5))}static empty(){return new e(z.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&z.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return z.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new z(t.slice()))}};var Go=class{constructor(t,n,r,i){this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}};Go.UNKNOWN_ID=-1;function Wf(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=D.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new Be(i,I.empty(),t)}function Hf(e){return new Be(e.readTime,e.key,-1)}var Be=class e{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new e(D.min(),I.empty(),-1)}static max(){return new e(D.max(),I.empty(),-1)}};function Yf(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=I.comparator(e.documentKey,t.documentKey),n!==0?n:k(e.largestBatchId,t.largestBatchId))}var Xf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$o=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function xr(e){return y(this,null,function*(){if(e.code!==m.FAILED_PRECONDITION||e.message!==Xf)throw e;_("LocalStore","Unexpectedly lost primary lease")})}var g=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&b(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,r)=>{n(t)})}static reject(t){return new e((n,r)=>{r(t)})}static waitFor(t){return new e((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next(i=>i?e.resolve(i):r());return n}static forEach(t,n){let r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new e((r,i)=>{let s=t.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(t[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(t,n){return new e((r,i)=>{let s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}};var Ko=class e{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Le(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Ic(r.target.error);this.V.reject(new Le(t,i))}}static open(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new Le(n,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(_("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let n=this.transaction.objectStore(t);return new Wo(n)}},Ri=class e{constructor(t,n,r){this.name=t,this.version=n,this.p=r,e.S(Fn())===12.2&&Qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return _("SimpleDb","Removing database:",t),Ne(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!jl())return!1;if(e.C())return!0;let t=Fn(),n=e.S(t),r=0<n&&n<10,i=e.v(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){let n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){let n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(t){return y(this,null,function*(){return this.db||(_("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Le(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new w(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new w(m.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Le(t,o))},i.onupgradeneeded=s=>{_("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{_("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(t){this.B=t,this.db&&(this.db.onversionchange=n=>t(n))}runTransaction(t,n,r,i){return y(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(t);let a=Ko.open(this.db,t,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),g.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(_("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Qo=class{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Ne(this.k.delete())}},Le=class extends w{constructor(t,n){super(m.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Dr(e){return e.name==="IndexedDbTransactionError"}var Wo=class{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(_("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(_("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Ne(r)}add(t){return _("SimpleDb","ADD",this.store.name,t,t),Ne(this.store.add(t))}get(t){return Ne(this.store.get(t)).next(n=>(n===void 0&&(n=null),_("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return _("SimpleDb","DELETE",this.store.name,t),Ne(this.store.delete(t))}count(){return _("SimpleDb","COUNT",this.store.name),Ne(this.store.count())}W(t,n){let r=this.options(t,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new g((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(t,n){let r=this.store.getAll(t,n===null?void 0:n);return new g((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(t,n){_("SimpleDb","DELETE ALL",this.store.name);let r=this.options(t,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);let i=this.cursor(r);return this.G(i,n)}Z(t){let n=this.cursor({});return new g((r,i)=>{n.onerror=s=>{let o=Ic(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){let r=[];return new g((i,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new Qo(a),l=n(a.primaryKey,a.value,c);if(l instanceof g){let u=l.catch(h=>(c.done(),g.reject(h)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>g.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){let r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}};function Ne(e){return new g((t,n)=>{e.onsuccess=r=>{let i=r.target.result;t(i)},e.onerror=r=>{let i=Ic(r.target.error);n(i)}})}var Lh=!1;function Ic(e){let t=Ri.S(Fn());if(t>=12.2&&t<13){let n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lh||(Lh=!0,setTimeout(()=>{throw r},0)),r}}return e}var md=(()=>{class e{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return e._e=-1,e})();function is(e){return e==null}function pr(e){return e===0&&1/e==-1/0}function Jf(e){return typeof e=="number"&&Number.isInteger(e)&&!pr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Zf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],F_=[...Zf,"documentOverlays"],tg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eg=tg,L_=[...eg,"indexConfiguration","indexState","indexEntries"];function qh(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $e(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fd(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var G=class e{constructor(t,n){this.comparator=t,this.root=n||zt.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){let t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fn(this.root,t,this.comparator,!1)}getReverseIterator(){return new fn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fn(this.root,t,this.comparator,!0)}},fn=class{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},zt=class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this,s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw b();let t=this.left.check();if(t!==this.right.check())throw b();return t+(this.isRed()?0:1)}};zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw b()}get value(){throw b()}get color(){throw b()}get left(){throw b()}get right(){throw b()}copy(t,n,r,i,s){return this}insert(t,n,r){return new zt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class e{constructor(t){this.comparator=t,this.data=new G(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){let r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pi(this.data.getIterator())}getIteratorFrom(t){return new Pi(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},Pi=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Et=class e{constructor(t){this.fields=t,t.sort(_t.comparator)}static empty(){return new e([])}unionWith(t){let n=new at(_t.comparator);for(let r of this.fields)n=n.add(r);for(let r of t)n=n.add(r);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return yn(this.fields,t.fields,(n,r)=>n.isEqual(r))}};var ki=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ki("Invalid base64 string: "+s):s}}(t);return new e(n)}static fromUint8Array(t){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return k(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var ng=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _e(e){if(O(!!e),typeof e=="string"){let t=0,n=ng.exec(e);if(O(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:U(e.seconds),nanos:U(e.nanos)}}function U(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ye(e){return typeof e=="string"?lt.fromBase64String(e):lt.fromUint8Array(e)}function Tc(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ec(e){let t=e.mapValue.fields.__previous_value__;return Tc(t)?Ec(t):t}function _r(e){let t=_e(e.mapValue.fields.__local_write_time__.timestampValue);return new tt(t.seconds,t.nanos)}var Ho=class{constructor(t,n,r,i,s,o,a,c,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Vi=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var Ei={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function je(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tc(e)?4:gd(e)?9007199254740991:10:b()}function Wt(e,t){if(e===t)return!0;let n=je(e);if(n!==je(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _r(e).isEqual(_r(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=_e(i.timestampValue),a=_e(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return ye(i.bytesValue).isEqual(ye(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return U(i.geoPointValue.latitude)===U(s.geoPointValue.latitude)&&U(i.geoPointValue.longitude)===U(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return U(i.integerValue)===U(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=U(i.doubleValue),a=U(s.doubleValue);return o===a?pr(o)===pr(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return yn(e.arrayValue.values||[],t.arrayValue.values||[],Wt);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(qh(o)!==qh(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Wt(o[c],a[c])))return!1;return!0}(e,t);default:return b()}}function yr(e,t){return(e.values||[]).find(n=>Wt(n,t))!==void 0}function vn(e,t){if(e===t)return 0;let n=je(e),r=je(t);if(n!==r)return k(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return k(e.booleanValue,t.booleanValue);case 2:return function(s,o){let a=U(s.integerValue||s.doubleValue),c=U(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return Bh(e.timestampValue,t.timestampValue);case 4:return Bh(_r(e),_r(t));case 5:return k(e.stringValue,t.stringValue);case 6:return function(s,o){let a=ye(s),c=ye(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=k(a[l],c[l]);if(u!==0)return u}return k(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){let a=k(U(s.latitude),U(o.latitude));return a!==0?a:k(U(s.longitude),U(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=vn(a[l],c[l]);if(u)return u}return k(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Ei.mapValue&&o===Ei.mapValue)return 0;if(s===Ei.mapValue)return 1;if(o===Ei.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let d=k(c[h],u[h]);if(d!==0)return d;let f=vn(a[c[h]],l[u[h]]);if(f!==0)return f}return k(c.length,u.length)}(e.mapValue,t.mapValue);default:throw b()}}function Bh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return k(e,t);let n=_e(e),r=_e(t),i=k(n.seconds,r.seconds);return i!==0?i:k(n.nanos,r.nanos)}function wn(e){return Yo(e)}function Yo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let r=_e(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ye(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return I.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Yo(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Yo(n.fields[o])}`;return i+"}"}(e.mapValue):b()}function Xo(e){return!!e&&"integerValue"in e}function bc(e){return!!e&&"arrayValue"in e}function jh(e){return!!e&&"nullValue"in e}function Uh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ai(e){return!!e&&"mapValue"in e}function dr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return $e(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=dr(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=dr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function gd(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var pt=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ai(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=dr(n)}setAll(t){let n=_t.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=dr(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){let n=this.field(t.popLast());Ai(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Wt(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];Ai(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){$e(n,(i,s)=>t[i]=s);for(let i of r)delete t[i]}clone(){return new e(dr(this.value))}};function pd(e){let t=[];return $e(e.fields,(n,r)=>{let i=new _t([n]);if(Ai(r)){let s=pd(r.mapValue).fields;if(s.length===0)t.push(i);else for(let o of s)t.push(i.child(o))}else t.push(i)}),new Et(t)}var Pt=class e{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new e(t,0,D.min(),D.min(),D.min(),pt.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,D.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,D.min(),D.min(),pt.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,D.min(),D.min(),pt.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(D.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=pt.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=D.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var In=class{constructor(t,n){this.position=t,this.inclusive=n}};function zh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let s=t[i],o=e.position[i];if(s.field.isKeyField()?r=I.comparator(I.fromName(o.referenceValue),n.key):r=vn(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Wt(e.position[n],t.position[n]))return!1;return!0}var Tn=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function rg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ni=class{},Q=class e extends Ni{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Zo(t,n,r):n==="array-contains"?new na(t,r):n==="in"?new ra(t,r):n==="not-in"?new ia(t,r):n==="array-contains-any"?new sa(t,r):new e(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new ta(t,r):new ea(t,r)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vn(n,this.value)):n!==null&&je(this.value)===je(n)&&this.matchesComparison(vn(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return b()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ht=class e extends Ni{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new e(t,n)}matches(t){return _d(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function _d(e){return e.op==="and"}function yd(e){return ig(e)&&_d(e)}function ig(e){for(let t of e.filters)if(t instanceof Ht)return!1;return!0}function Jo(e){if(e instanceof Q)return e.field.canonicalString()+e.op.toString()+wn(e.value);if(yd(e))return e.filters.map(t=>Jo(t)).join(",");{let t=e.filters.map(n=>Jo(n)).join(",");return`${e.op}(${t})`}}function vd(e,t){return e instanceof Q?function(r,i){return i instanceof Q&&r.op===i.op&&r.field.isEqual(i.field)&&Wt(r.value,i.value)}(e,t):e instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&vd(o,i.filters[a]),!0):!1}(e,t):void b()}function wd(e){return e instanceof Q?function(n){return`${n.field.canonicalString()} ${n.op} ${wn(n.value)}`}(e):e instanceof Ht?function(n){return n.op.toString()+" {"+n.getFilters().map(wd).join(" ,")+"}"}(e):"Filter"}var Zo=class extends Q{constructor(t,n,r){super(t,n,r),this.key=I.fromName(r.referenceValue)}matches(t){let n=I.comparator(t.key,this.key);return this.matchesComparison(n)}},ta=class extends Q{constructor(t,n){super(t,"in",n),this.keys=Id("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},ea=class extends Q{constructor(t,n){super(t,"not-in",n),this.keys=Id("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function Id(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>I.fromName(r.referenceValue))}var na=class extends Q{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return bc(n)&&yr(n.arrayValue,this.value)}},ra=class extends Q{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&yr(this.value.arrayValue,n)}},ia=class extends Q{constructor(t,n){super(t,"not-in",n)}matches(t){if(yr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!yr(this.value.arrayValue,n)}},sa=class extends Q{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!bc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yr(this.value.arrayValue,r))}};var oa=class{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function $h(e,t=null,n=[],r=[],i=null,s=null,o=null){return new oa(e,t,n,r,i,s,o)}function Ac(e){let t=x(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Jo(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),is(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>wn(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>wn(r)).join(",")),t.ce=n}return t.ce}function Cc(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!rg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gh(e.startAt,t.startAt)&&Gh(e.endAt,t.endAt)}function aa(e){return I.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var En=class{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function sg(e,t,n,r,i,s,o,a){return new En(e,t,n,r,i,s,o,a)}function Sc(e){return new En(e)}function Kh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function og(e){return e.collectionGroup!==null}function mr(e){let t=x(e);if(t.le===null){t.le=[];let n=new Set;for(let s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new at(_t.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new Tn(s,r))}),n.has(_t.keyField().canonicalString())||t.le.push(new Tn(_t.keyField(),r))}return t.le}function Gt(e){let t=x(e);return t.he||(t.he=Td(t,mr(e))),t.he}function Td(e,t){if(e.limitType==="F")return $h(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Tn(i.field,s)});let n=e.endAt?new In(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new In(e.startAt.position,e.startAt.inclusive):null;return $h(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ca(e,t,n){return new En(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ss(e,t){return Cc(Gt(e),Gt(t))&&e.limitType===t.limitType}function Ed(e){return`${Ac(Gt(e))}|lt:${e.limitType}`}function dn(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wd(i)).join(", ")}]`),is(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>wn(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>wn(i)).join(",")),`Target(${r})`}(Gt(e))}; limitType=${e.limitType})`}function os(e,t){return t.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):I.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(let s of mr(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=zh(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,mr(r),i)||r.endAt&&!function(o,a,c){let l=zh(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,mr(r),i))}(e,t)}function ag(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function bd(e){return(t,n)=>{let r=!1;for(let i of mr(e)){let s=cg(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cg(e,t,n){let r=e.field.isKeyField()?I.comparator(t.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?vn(c,l):b()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return b()}}var ve=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){let r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){$e(this.inner,(n,r)=>{for(let[i,s]of r)t(i,s)})}isEmpty(){return fd(this.inner)}size(){return this.innerSize}};var lg=new G(I.comparator);function ce(){return lg}var Ad=new G(I.comparator);function hr(...e){let t=Ad;for(let n of e)t=t.insert(n.key,n);return t}function Cd(e){let t=Ad;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Oe(){return fr()}function Sd(){return fr()}function fr(){return new ve(e=>e.toString(),(e,t)=>e.isEqual(t))}var ug=new G(I.comparator),hg=new at(I.comparator);function R(...e){let t=hg;for(let n of e)t=t.add(n);return t}var dg=new at(k);function mg(){return dg}function xd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pr(t)?"-0":t}}function Dd(e){return{integerValue:""+e}}function fg(e,t){return Jf(t)?Dd(t):xd(e,t)}var bn=class{constructor(){this._=void 0}};function gg(e,t,n){return e instanceof An?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tc(s)&&(s=Ec(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof Ue?Pd(e,t):e instanceof ze?kd(e,t):function(i,s){let o=Rd(i,s),a=Qh(o)+Qh(i.Ie);return Xo(o)&&Xo(i.Ie)?Dd(a):xd(i.serializer,a)}(e,t)}function pg(e,t,n){return e instanceof Ue?Pd(e,t):e instanceof ze?kd(e,t):n}function Rd(e,t){return e instanceof Cn?function(r){return Xo(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}var An=class extends bn{},Ue=class extends bn{constructor(t){super(),this.elements=t}};function Pd(e,t){let n=Vd(t);for(let r of e.elements)n.some(i=>Wt(i,r))||n.push(r);return{arrayValue:{values:n}}}var ze=class extends bn{constructor(t){super(),this.elements=t}};function kd(e,t){let n=Vd(t);for(let r of e.elements)n=n.filter(i=>!Wt(i,r));return{arrayValue:{values:n}}}var Cn=class extends bn{constructor(t,n){super(),this.serializer=t,this.Ie=n}};function Qh(e){return U(e.integerValue||e.doubleValue)}function Vd(e){return bc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function _g(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof Ue&&i instanceof Ue||r instanceof ze&&i instanceof ze?yn(r.elements,i.elements,Wt):r instanceof Cn&&i instanceof Cn?Wt(r.Ie,i.Ie):r instanceof An&&i instanceof An}(e.transform,t.transform)}var la=class{constructor(t,n){this.version=t,this.transformResults=n}},ae=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Ci(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Sn=class{};function Nd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new vr(e.key,ae.none()):new Ge(e.key,e.data,ae.none());{let n=e.data,r=pt.empty(),i=new at(_t.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yt(e.key,r,new Et(i.toArray()),ae.none())}}function yg(e,t,n){e instanceof Ge?function(i,s,o){let a=i.value.clone(),c=Hh(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Yt?function(i,s,o){if(!Ci(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Hh(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Od(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function gr(e,t,n,r){return e instanceof Ge?function(s,o,a,c){if(!Ci(s.precondition,o))return a;let l=s.value.clone(),u=Yh(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yt?function(s,o,a,c){if(!Ci(s.precondition,o))return a;let l=Yh(s.fieldTransforms,c,o),u=o.data;return u.setAll(Od(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(e,t,n,r):function(s,o,a){return Ci(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function vg(e,t){let n=null;for(let r of e.fieldTransforms){let i=t.data.field(r.field),s=Rd(r.transform,i||null);s!=null&&(n===null&&(n=pt.empty()),n.set(r.field,s))}return n||null}function Wh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yn(r,i,(s,o)=>_g(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Ge=class extends Sn{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yt=class extends Sn{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Od(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}}),t}function Hh(e,t,n){let r=new Map;O(e.length===n.length);for(let i=0;i<n.length;i++){let s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,pg(o,a,n[i]))}return r}function Yh(e,t,n){let r=new Map;for(let i of e){let s=i.transform,o=n.data.field(i.field);r.set(i.field,gg(s,o,t))}return r}var vr=class extends Sn{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ua=class extends Sn{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ha=class{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(t.key)&&yg(s,t,r[i])}}applyToLocalView(t,n){for(let r of this.baseMutations)r.key.isEqual(t.key)&&(n=gr(r,t,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(t.key)&&(n=gr(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let r=Sd();return this.mutations.forEach(i=>{let s=t.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Nd(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(D.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),R())}isEqual(t){return this.batchId===t.batchId&&yn(this.mutations,t.mutations,(n,r)=>Wh(n,r))&&yn(this.baseMutations,t.baseMutations,(n,r)=>Wh(n,r))}},da=class e{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){O(t.mutations.length===r.length);let i=function(){return ug}(),s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new e(t,n,r,i)}};var ma=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fa=class{constructor(t,n,r){this.alias=t,this.aggregateType=n,this.fieldPath=r}};var ga=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var $,P;function wg(e){switch(e){default:return b();case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0}}function Md(e){if(e===void 0)return Qt("GRPC error has no .code"),m.UNKNOWN;switch(e){case $.OK:return m.OK;case $.CANCELLED:return m.CANCELLED;case $.UNKNOWN:return m.UNKNOWN;case $.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case $.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case $.INTERNAL:return m.INTERNAL;case $.UNAVAILABLE:return m.UNAVAILABLE;case $.UNAUTHENTICATED:return m.UNAUTHENTICATED;case $.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case $.NOT_FOUND:return m.NOT_FOUND;case $.ALREADY_EXISTS:return m.ALREADY_EXISTS;case $.PERMISSION_DENIED:return m.PERMISSION_DENIED;case $.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case $.ABORTED:return m.ABORTED;case $.OUT_OF_RANGE:return m.OUT_OF_RANGE;case $.UNIMPLEMENTED:return m.UNIMPLEMENTED;case $.DATA_LOSS:return m.DATA_LOSS;default:return b()}}(P=$||($={}))[P.OK=0]="OK",P[P.CANCELLED=1]="CANCELLED",P[P.UNKNOWN=2]="UNKNOWN",P[P.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",P[P.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",P[P.NOT_FOUND=5]="NOT_FOUND",P[P.ALREADY_EXISTS=6]="ALREADY_EXISTS",P[P.PERMISSION_DENIED=7]="PERMISSION_DENIED",P[P.UNAUTHENTICATED=16]="UNAUTHENTICATED",P[P.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",P[P.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",P[P.ABORTED=10]="ABORTED",P[P.OUT_OF_RANGE=11]="OUT_OF_RANGE",P[P.UNIMPLEMENTED=12]="UNIMPLEMENTED",P[P.INTERNAL=13]="INTERNAL",P[P.UNAVAILABLE=14]="UNAVAILABLE",P[P.DATA_LOSS=15]="DATA_LOSS";var Xh=null;function Ig(){return new TextEncoder}var Tg=new Ve([4294967295,4294967295],0);function Jh(e){let t=Ig().encode(e),n=new Mh;return n.update(t),new Uint8Array(n.digest())}function Zh(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ve([n,r],0),new Ve([i,s],0)]}var pa=class e{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Me(`Invalid padding: ${n}`);if(r<0)throw new Me(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Me(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Me(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Ve.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Ve.fromNumber(r)));return i.compare(Tg)===1&&(i=new Ve([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let n=Jh(t),[r,i]=Zh(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new e(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;let n=Jh(t),[r,i]=Zh(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(t){let n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}},Me=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Oi=class e{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,wr.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(D.min(),i,new G(k),ce(),R())}},wr=class e{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,R(),R(),R())}};var gn=class{constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}},Mi=class{constructor(t,n){this.targetId=t,this.fe=n}},Fi=class{constructor(t,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}},Li=class{constructor(){this.ge=0,this.pe=ed(),this.ye=lt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=R(),n=R(),r=R();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:b()}}),new wr(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=ed()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,O(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},_a=class{constructor(t){this.Le=t,this.ke=new Map,this.qe=ce(),this.Qe=td(),this.Ke=new G(k)}$e(t){for(let n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(let n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{let r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:b()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){let n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){let s=i.target;if(aa(s))if(r===0){let o=new I(s.path);this.We(n,o,Pt.newNoDocument(o,D.min()))}else O(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(t),c=a?this.et(a,t,o):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}Xh?.tt(function(u,h,d,f,E){var T,v,A,N,F,W;let Te={localCacheCount:u,existenceFilterCount:h.count,databaseId:d.database,projectId:d.projectId},ut=h.unchangedNames;return ut&&(Te.bloomFilter={applied:E===0,hashCount:(T=ut?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(N=(A=(v=ut?.bits)===null||v===void 0?void 0:v.bitmap)===null||A===void 0?void 0:A.length)!==null&&N!==void 0?N:0,padding:(W=(F=ut?.bits)===null||F===void 0?void 0:F.padding)!==null&&W!==void 0?W:0,mightContain:He=>{var Nr;return(Nr=f?.mightContain(He))!==null&&Nr!==void 0&&Nr}}),Te}(o,t.fe,this.Le.nt(),a,c))}}}}Xe(t){let n=t.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=ye(r).toUint8Array()}catch(c){if(c instanceof ki)return _n("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new pa(o,i,s)}catch(c){return _n(c instanceof Me?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&aa(a.target)){let c=new I(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Pt.newNoDocument(c,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=R();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));let i=new Oi(t,n,this.Ke,this.qe,r);return this.qe=ce(),this.Qe=td(),this.Ke=new G(k),i}Ue(t,n){if(!this.je(t))return;let r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;let i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){let n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new Li,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new at(k),this.Qe=this.Qe.insert(t,n)),n}je(t){let n=this.Ye(t)!==null;return n||_("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){let n=this.ke.get(t);return n&&n.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Li),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}};function td(){return new G(I.comparator)}function ed(){return new G(I.comparator)}var Eg={asc:"ASCENDING",desc:"DESCENDING"},bg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ag={and:"AND",or:"OR"},ya=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function va(e,t){return e.useProto3Json||is(t)?t:{value:t}}function qi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Cg(e,t){return qi(e,t.toTimestamp())}function $t(e){return O(!!e),D.fromTimestamp(function(n){let r=_e(n);return new tt(r.seconds,r.nanos)}(e))}function xc(e,t){return wa(e,t).canonicalString()}function wa(e,t){let n=function(i){return new z(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Ld(e){let t=z.fromString(e);return O(Gd(t)),t}function Ia(e,t){return xc(e.databaseId,t.path)}function Vo(e,t){let n=Ld(t);if(n.get(1)!==e.databaseId.projectId)throw new w(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new w(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new I(Bd(n))}function qd(e,t){return xc(e.databaseId,t)}function Sg(e){let t=Ld(e);return t.length===4?z.emptyPath():Bd(t)}function Ta(e){return new z(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bd(e){return O(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function nd(e,t,n){return{name:Ia(e,t),fields:n.value.mapValue.fields}}function xg(e,t){let n;if("targetChange"in t){t.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:b()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(O(u===void 0||typeof u=="string"),lt.fromBase64String(u||"")):(O(u===void 0||u instanceof Uint8Array),lt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){let u=l.code===void 0?m.UNKNOWN:Md(l.code);return new w(u,l.message||"")}(o);n=new Fi(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=Vo(e,r.document.name),s=$t(r.document.updateTime),o=r.document.createTime?$t(r.document.createTime):D.min(),a=new pt({mapValue:{fields:r.document.fields}}),c=Pt.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new gn(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;let r=t.documentDelete;r.document;let i=Vo(e,r.document),s=r.readTime?$t(r.readTime):D.min(),o=Pt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gn([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let r=t.documentRemove;r.document;let i=Vo(e,r.document),s=r.removedTargetIds||[];n=new gn([],s,i,null)}else{if(!("filter"in t))return b();{t.filter;let r=t.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new ga(i,s),a=r.targetId;n=new Mi(a,o)}}return n}function Dg(e,t){let n;if(t instanceof Ge)n={update:nd(e,t.key,t.value)};else if(t instanceof vr)n={delete:Ia(e,t.key)};else if(t instanceof Yt)n={update:nd(e,t.key,t.data),updateMask:Fg(t.fieldMask)};else{if(!(t instanceof ua))return b();n={verify:Ia(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof An)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ue)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ze)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cn)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw b()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Cg(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:b()}(e,t.precondition)),n}function Rg(e,t){return e&&e.length>0?(O(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?$t(i.updateTime):$t(s);return o.isEqual(D.min())&&(o=$t(s)),new la(o,i.transformResults||[])}(n,t))):[]}function Pg(e,t){return{documents:[qd(e,t.path)]}}function jd(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qd(e,i);let s=function(l){if(l.length!==0)return zd(Ht.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:ge(d.field),direction:Ng(d.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let a=va(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:n,parent:i}}function kg(e){let t=Sg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){O(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(h){let d=Ud(h);return d instanceof Ht&&yd(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(E){return new Tn(mn(E.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,is(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(h){let d=!!h.before,f=h.values||[];return new In(f,d)}(n.startAt));let l=null;return n.endAt&&(l=function(h){let d=!h.before,f=h.values||[];return new In(f,d)}(n.endAt)),sg(t,i,o,s,a,"F",c,l)}function Vg(e,t){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return b()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Ud(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=mn(n.unaryFilter.field);return Q.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=mn(n.unaryFilter.field);return Q.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=mn(n.unaryFilter.field);return Q.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=mn(n.unaryFilter.field);return Q.create(o,"!=",{nullValue:"NULL_VALUE"});default:return b()}}(e):e.fieldFilter!==void 0?function(n){return Q.create(mn(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return b()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ht.create(n.compositeFilter.filters.map(r=>Ud(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return b()}}(n.compositeFilter.op))}(e):b()}function Ng(e){return Eg[e]}function Og(e){return bg[e]}function Mg(e){return Ag[e]}function ge(e){return{fieldPath:e.canonicalString()}}function mn(e){return _t.fromServerFormat(e.fieldPath)}function zd(e){return e instanceof Q?function(n){if(n.op==="=="){if(Uh(n.value))return{unaryFilter:{field:ge(n.field),op:"IS_NAN"}};if(jh(n.value))return{unaryFilter:{field:ge(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uh(n.value))return{unaryFilter:{field:ge(n.field),op:"IS_NOT_NAN"}};if(jh(n.value))return{unaryFilter:{field:ge(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ge(n.field),op:Og(n.op),value:n.value}}}(e):e instanceof Ht?function(n){let r=n.getFilters().map(i=>zd(i));return r.length===1?r[0]:{compositeFilter:{op:Mg(n.op),filters:r}}}(e):b()}function Fg(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Gd(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var Ir=class e{constructor(t,n,r,i,s=D.min(),o=D.min(),a=lt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Ea=class{constructor(t){this.ct=t}};function Lg(e){let t=kg({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ca(t,t.limit,"L"):t}var Bi=class{constructor(){}Pt(t,n){this.It(t,n),n.Tt()}It(t,n){if("nullValue"in t)this.Et(n,5);else if("booleanValue"in t)this.Et(n,10),n.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(n,15),n.dt(U(t.integerValue));else if("doubleValue"in t){let r=U(t.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),pr(r)?n.dt(0):n.dt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,n),this.Vt(n);else if("bytesValue"in t)this.Et(n,30),n.ft(ye(t.bytesValue)),this.Vt(n);else if("referenceValue"in t)this.gt(t.referenceValue,n);else if("geoPointValue"in t){let r=t.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in t?gd(t)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,n),this.Vt(n)):"arrayValue"in t?(this.wt(t.arrayValue,n),this.Vt(n)):b()}Rt(t,n){this.Et(n,25),this.St(t,n)}St(t,n){n.At(t)}yt(t,n){let r=t.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(t,n){let r=t.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(t,n){this.Et(n,37),I.fromName(t).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(t,n){t.dt(n)}Vt(t){t.dt(2)}};Bi.bt=new Bi;var ba=class{constructor(){this._n=new Aa}addToCollectionParentIndex(t,n){return this._n.add(n),g.resolve()}getCollectionParents(t,n){return g.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return g.resolve()}deleteFieldIndex(t,n){return g.resolve()}deleteAllFieldIndexes(t){return g.resolve()}createTargetIndexes(t,n){return g.resolve()}getDocumentsMatchingTarget(t,n){return g.resolve(null)}getIndexType(t,n){return g.resolve(0)}getFieldIndexes(t,n){return g.resolve([])}getNextCollectionGroupToUpdate(t){return g.resolve(null)}getMinOffset(t,n){return g.resolve(Be.min())}getMinOffsetFromCollectionGroup(t,n){return g.resolve(Be.min())}updateCollectionGroup(t,n,r){return g.resolve()}updateIndexEntries(t,n){return g.resolve()}},Aa=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new at(z.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){let n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new at(z.comparator)).toArray()}};var B_=new Uint8Array(0);var Ut=class e{constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(41943040,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);var Tr=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Bn(){return new e(-1)}};var Ca=class{constructor(){this.changes=new ve(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Pt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?g.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Sa=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var xa=class{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&gr(r.mutation,i,Et.empty(),tt.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,R()).next(()=>r))}getLocalViewOfDocuments(t,n,r=R()){let i=Oe();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=hr();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){let r=Oe();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,R()))}populateOverlays(t,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=ce(),o=fr(),a=function(){return fr()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Yt)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),gr(u.mutation,l,u.mutation.getFieldMask(),tt.now())):o.set(l.key,Et.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new Sa(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){let r=fr(),i=new G((o,a)=>o-a),s=R();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||Et.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||R()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=Sd();u.forEach(d=>{if(!s.has(d)){let f=Nd(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,h))}return g.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return I.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):og(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):g.resolve(Oe()),a=-1,c=s;return o.next(l=>g.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?g.resolve():this.remoteDocumentCache.getEntry(t,u).next(d=>{c=c.insert(u,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,c,l,R())).next(u=>({batchId:a,changes:Cd(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new I(n)).next(r=>{let i=hr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){let s=n.collectionGroup,o=hr();return this.indexManager.getCollectionParents(t,s).next(a=>g.forEach(a,c=>{let l=function(h,d){return new En(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,Pt.newInvalidDocument(u)))});let a=hr();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&gr(u.mutation,l,Et.empty(),tt.now()),os(n,l)&&(a=a.insert(c,l))}),a})}};var Da=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return g.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$t(i.createTime)}}(n)),g.resolve()}getNamedQuery(t,n){return g.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Lg(i.bundledQuery),readTime:$t(i.readTime)}}(n)),g.resolve()}};var Ra=class{constructor(){this.overlays=new G(I.comparator),this.hr=new Map}getOverlay(t,n){return g.resolve(this.overlays.get(n))}getOverlays(t,n){let r=Oe();return g.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),g.resolve()}removeOverlaysForBatchId(t,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),g.resolve()}getOverlaysForCollection(t,n,r){let i=Oe(),s=n.length+1,o=new I(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return g.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new G((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=Oe(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Oe(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return g.resolve(a)}ht(t,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ma(n,r));let s=this.hr.get(n);s===void 0&&(s=R(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Er=class{constructor(){this.Pr=new at(K.Ir),this.Tr=new at(K.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){let r=new K(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new K(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){let n=new I(new z([])),r=new K(n,t),i=new K(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let n=new I(new z([])),r=new K(n,t),i=new K(n,t+1),s=R();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){let n=new K(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}},K=class{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return I.comparator(t.key,n.key)||k(t.pr,n.pr)}static Er(t,n){return k(t.pr,n.pr)||I.comparator(t.key,n.key)}};var Pa=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new at(K.Ir)}checkEmpty(t){return g.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ha(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new K(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return g.resolve(o)}lookupMutationBatch(t,n){return g.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){let r=n+1,i=this.br(r),s=i<0?0:i;return g.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let r=new K(n,0),i=new K(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),g.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new at(k);return n.forEach(i=>{let s=new K(i,0),o=new K(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),g.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){let r=n.path,i=r.length+1,s=r;I.isDocumentKey(s)||(s=s.child(""));let o=new K(new I(s),0),a=new at(k);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},o),g.resolve(this.Dr(a))}Dr(t){let n=[];return t.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){O(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return g.forEach(n.mutations,i=>{let s=new K(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){let r=new K(n,0),i=this.wr.firstAfterOrEqual(r);return g.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,g.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ka=class{constructor(t){this.vr=t,this.docs=function(){return new G(I.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let r=this.docs.get(n);return g.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(t,n){let r=ce();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pt.newInvalidDocument(i))}),g.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=ce(),o=n.path,a=new I(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Yf(Hf(u),r)<=0||(i.has(u.key)||os(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return g.resolve(s)}getAllFromCollectionGroup(t,n,r,i){b()}Fr(t,n){return g.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Va(this)}getSize(t){return g.resolve(this.size)}},Va=class extends Ca{constructor(t){super(),this.ar=t}applyChanges(t){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),g.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}};var Na=class{constructor(t){this.persistence=t,this.Mr=new ve(n=>Ac(n),Cc),this.lastRemoteSnapshotVersion=D.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Er,this.targetCount=0,this.Br=Tr.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),g.resolve()}getLastRemoteSnapshotVersion(t){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return g.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),g.resolve()}qn(t){this.Mr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Br=new Tr(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,g.resolve()}updateTargetData(t,n){return this.qn(n),g.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,g.resolve()}removeTargets(t,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),g.waitFor(s).next(()=>i)}getTargetCount(t){return g.resolve(this.targetCount)}getTargetData(t,n){let r=this.Mr.get(n)||null;return g.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),g.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),g.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),g.resolve()}getMatchingKeysForTargetId(t,n){let r=this.Nr.gr(n);return g.resolve(r)}containsKey(t,n){return g.resolve(this.Nr.containsKey(n))}};var Oa=class{constructor(t,n){this.Lr={},this.overlays={},this.kr=new md(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Na(this),this.indexManager=new ba,this.remoteDocumentCache=function(i){return new ka(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Ea(n),this.$r=new Da(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Ra,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Lr[t.toKey()];return r||(r=new Pa(n,this.referenceDelegate),this.Lr[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){_("MemoryPersistence","Starting transaction:",t);let i=new Ma(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return g.or(Object.values(this.Lr).map(r=>()=>r.containsKey(t,n)))}},Ma=class extends $o{constructor(t){super(),this.currentSequenceNumber=t}},Fa=class e{constructor(t){this.persistence=t,this.zr=new Er,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw b()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),g.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),g.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),g.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Jr,r=>{let i=I.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,D.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return g.or([()=>g.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}};var La=class e{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=R(),i=R();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new e(t,n.fromCache,r,i)}};var qa=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Ba=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Bl()?8:Ri.v(Fn())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){let s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new qa;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(ur()<=ie.DEBUG&&_("QueryEngine","SDK will not create cache indexes for query:",dn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),g.resolve()):(ur()<=ie.DEBUG&&_("QueryEngine","Query:",dn(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ur()<=ie.DEBUG&&_("QueryEngine","The SDK decides to create cache indexes for query:",dn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Gt(n))):g.resolve())}ji(t,n){if(Kh(n))return g.resolve(null);let r=Gt(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ca(n,null,"F"),r=Gt(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{let o=R(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,o,c.readTime)?this.ji(t,ca(n,null,"F")):this.es(t,l,n,c)}))})))}Hi(t,n,r,i){return Kh(n)||i.isEqual(D.min())?g.resolve(null):this.zi.getDocuments(t,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?g.resolve(null):(ur()<=ie.DEBUG&&_("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),dn(n)),this.es(t,o,n,Wf(i,-1)).next(a=>a))})}Zi(t,n){let r=new at(bd(t));return n.forEach((i,s)=>{os(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;let s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return ur()<=ie.DEBUG&&_("QueryEngine","Using full collection scan to execute query:",dn(n)),this.zi.getDocumentsMatchingQuery(t,n,Be.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ja=class{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new G(k),this.rs=new ve(s=>Ac(s),Cc),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xa(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}};function qg(e,t,n,r){return new ja(e,t,n,r)}function $d(e,t){return y(this,null,function*(){let n=x(e);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=R();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Bg(e,t){let n=x(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let h=l.batch,d=h.keys(),f=g.resolve();return d.forEach(E=>{f=f.next(()=>u.getEntry(c,E)).next(T=>{let v=l.docVersions.get(E);O(v!==null),T.version.compareTo(v)<0&&(h.applyToRemoteDocument(T,l),T.isValidDocument()&&(T.setReadTime(l.commitVersion),u.addEntry(T)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=R();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Kd(e){let t=x(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function jg(e,t){let n=x(e),r=t.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];t.targetChanges.forEach((u,h)=>{let d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?f=f.withResumeToken(lt.EMPTY_BYTE_STRING,D.min()).withLastLimboFreeSnapshotVersion(D.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(T,v,A){return T.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let c=ce(),l=R();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Ug(s,o,t.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(D.min())){let u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return g.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.ns=i,s))}function Ug(e,t,n){let r=R(),i=R();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=ce();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(D.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):_("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:o,ls:i}})}function zg(e,t){let n=x(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Gg(e,t){let n=x(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,g.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ir(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}function Ua(e,t,n){return y(this,null,function*(){let r=x(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Dr(o))throw o;_("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)})}function rd(e,t,n){let r=x(e),i=D.min(),s=R();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let h=x(c),d=h.rs.get(u);return d!==void 0?g.resolve(h.ns.get(d)):h.Qr.getTargetData(l,u)}(r,o,Gt(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:D.min(),n?s:R())).next(a=>($g(r,ag(t),a),{documents:a,hs:s})))}function $g(e,t,n){let r=e.ss.get(t)||D.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}var ji=class{constructor(){this.activeTargetIds=mg()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var za=class{constructor(){this.no=new ji,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ji,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Ga=class{io(t){}shutdown(){}};var Ui=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var bi=null;function No(){return bi===null?bi=function(){return 268435456+Math.round(2147483648*Math.random())}():bi++,"0x"+bi.toString(16)}var Kg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var $a=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}};var ot="WebChannelConnection",Ka=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=No(),c=this.bo(n,r.toUriEncodedString());_("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,c,l,i).then(u=>(_("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw _n("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pn}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=Kg[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,i){let s=No();return new Promise((o,a)=>{let c=new Oh;c.setWithCredentials(!0),c.listenOnce(Vh.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ti.NO_ERROR:let u=c.getResponseJson();_(ot,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case Ti.TIMEOUT:_(ot,`RPC '${t}' ${s} timed out`),a(new w(m.DEADLINE_EXCEEDED,"Request time out"));break;case Ti.HTTP_ERROR:let h=c.getStatus();if(_(ot,`RPC '${t}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);let f=d?.error;if(f&&f.status&&f.message){let E=function(v){let A=v.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(A)>=0?A:m.UNKNOWN}(f.status);a(new w(E,f.message))}else a(new w(m.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(m.UNAVAILABLE,"Connection failed."));break;default:b()}}finally{_(ot,`RPC '${t}' ${s} completed.`)}});let l=JSON.stringify(i);_(ot,`RPC '${t}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Fo(t,n,r){let i=No(),s=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ph(),a=kh(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=s.join("");_(ot,`Creating RPC '${t}' stream ${i}: ${u}`,c);let h=o.createWebChannel(u,c),d=!1,f=!1,E=new $a({lo:v=>{f?_(ot,`Not sending because RPC '${t}' stream ${i} is closed:`,v):(d||(_(ot,`Opening RPC '${t}' stream ${i} transport.`),h.open(),d=!0),_(ot,`RPC '${t}' stream ${i} sending:`,v),h.send(v))},ho:()=>h.close()}),T=(v,A,N)=>{v.listen(A,F=>{try{N(F)}catch(W){setTimeout(()=>{throw W},0)}})};return T(h,lr.EventType.OPEN,()=>{f||_(ot,`RPC '${t}' stream ${i} transport opened.`)}),T(h,lr.EventType.CLOSE,()=>{f||(f=!0,_(ot,`RPC '${t}' stream ${i} transport closed`),E.Vo())}),T(h,lr.EventType.ERROR,v=>{f||(f=!0,_n(ot,`RPC '${t}' stream ${i} transport errored:`,v),E.Vo(new w(m.UNAVAILABLE,"The operation could not be completed")))}),T(h,lr.EventType.MESSAGE,v=>{var A;if(!f){let N=v.data[0];O(!!N);let F=N,W=F.error||((A=F[0])===null||A===void 0?void 0:A.error);if(W){_(ot,`RPC '${t}' stream ${i} received error:`,W);let Te=W.status,ut=function(Wm){let el=$[Wm];if(el!==void 0)return Md(el)}(Te),He=W.message;ut===void 0&&(ut=m.INTERNAL,He="Unknown error status: "+Te+" with message "+W.message),f=!0,E.Vo(new w(ut,He)),h.close()}else _(ot,`RPC '${t}' stream ${i} received:`,N),E.mo(N)}}),T(a,Nh.STAT_EVENT,v=>{v.stat===ko.PROXY?_(ot,`RPC '${t}' stream ${i} detected buffering proxy`):v.stat===ko.NOPROXY&&_(ot,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}};function Oo(){return typeof document<"u"?document:null}function as(e){return new ya(e,!0)}var zi=class{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&_("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Gi=class{constructor(t,n,r,i,s,o,a,c){this.oi=t,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new zi(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return y(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}e_(){return y(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(t,n){return y(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===m.RESOURCE_EXHAUSTED?(Qt(n.toString()),Qt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===m.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{t(()=>{let i=new w(m.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(t,n){let r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>y(this,null,function*(){this.state=0,this.start()}))}__(t){return _("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Qa=class extends Gi{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();let n=xg(this.serializer,t),r=function(s){if(!("targetChange"in s))return D.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?D.min():o.readTime?$t(o.readTime):D.min()}(t);return this.listener.u_(n,r)}c_(t){let n={};n.database=Ta(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=aa(c)?{documents:Pg(s,c)}:{query:jd(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Fd(s,o.resumeToken);let l=va(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(D.min())>0){a.readTime=qi(s,o.snapshotVersion.toTimestamp());let l=va(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);let r=Vg(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){let n={};n.database=Ta(this.serializer),n.removeTarget=t,this.t_(n)}},Wa=class extends Gi{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(O(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();let n=Rg(t.writeResults,t.commitTime),r=$t(t.commitTime);return this.listener.T_(r,n)}return O(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let t={};t.database=Ta(this.serializer),this.t_(t)}I_(t){let n={streamToken:this.lastStreamToken,writes:t.map(r=>Dg(this.serializer,r))};this.t_(n)}};var Ha=class extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new w(m.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,wa(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(m.UNKNOWN,s.toString())})}vo(t,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,wa(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(m.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};function Qg(e,t,n){return y(this,null,function*(){var r;let i=x(e),{request:s,V_:o,parent:a}=function(h,d,f){let{ut:E,parent:T}=jd(h,d),v={},A=[],N=0;return f.forEach(F=>{let W="aggregate_"+N++;v[W]=F.alias,F.aggregateType==="count"?A.push({alias:W,count:{}}):F.aggregateType==="avg"?A.push({alias:W,avg:{field:ge(F.fieldPath)}}):F.aggregateType==="sum"&&A.push({alias:W,sum:{field:ge(F.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:A,structuredQuery:E.structuredQuery},parent:E.parent},V_:v,parent:T}}(i.serializer,function(h){let d=x(h);return d.Pe||(d.Pe=Td(d,h.explicitOrderBy)),d.Pe}(t),n);i.connection.wo||delete s.parent;let c=(yield i.vo("RunAggregationQuery",i.serializer.databaseId,a,s,1)).filter(u=>!!u.result);O(c.length===1);let l=(r=c[0].result)===null||r===void 0?void 0:r.aggregateFields;return Object.keys(l).reduce((u,h)=>(u[o[h]]=l[h],u),{})})}var Ya=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Qt(n),this.g_=!1):_("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Xa=class{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Ke(this)&&(_("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=x(c);l.v_.add(4),yield Rr(l),l.x_.set("Unknown"),l.v_.delete(4),yield cs(l)})}(this))}))}),this.x_=new Ya(r,i)}};function cs(e){return y(this,null,function*(){if(Ke(e))for(let t of e.F_)yield t(!0)})}function Rr(e){return y(this,null,function*(){for(let t of e.F_)yield t(!1)})}function Qd(e,t){let n=x(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Pc(n)?Rc(n):kn(n).Jo()&&Dc(n,t))}function Wd(e,t){let n=x(e),r=kn(n);n.C_.delete(t),r.Jo()&&Hd(n,t),n.C_.size===0&&(r.Jo()?r.Xo():Ke(n)&&n.x_.set("Unknown"))}function Dc(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(D.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}kn(e).c_(t)}function Hd(e,t){e.O_.Oe(t),kn(e).l_(t)}function Rc(e){e.O_=new _a({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),kn(e).start(),e.x_.p_()}function Pc(e){return Ke(e)&&!kn(e).Ho()&&e.C_.size>0}function Ke(e){return x(e).v_.size===0}function Yd(e){e.O_=void 0}function Wg(e){return y(this,null,function*(){e.C_.forEach((t,n)=>{Dc(e,t)})})}function Hg(e,t){return y(this,null,function*(){Yd(e),Pc(e)?(e.x_.S_(t),Rc(e)):e.x_.set("Unknown")})}function Yg(e,t,n){return y(this,null,function*(){if(e.x_.set("Online"),t instanceof Fi&&t.state===2&&t.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(e,t)}catch(r){_("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield $i(e,r)}else if(t instanceof gn?e.O_.$e(t):t instanceof Mi?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(D.min()))try{let r=yield Kd(e.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.C_.get(l);u&&s.C_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.C_.get(c);if(!u)return;s.C_.set(c,u.withResumeToken(lt.EMPTY_BYTE_STRING,u.snapshotVersion)),Hd(s,c);let h=new Ir(u.target,c,l,u.sequenceNumber);Dc(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n))}catch(r){_("RemoteStore","Failed to raise snapshot:",r),yield $i(e,r)}})}function $i(e,t,n){return y(this,null,function*(){if(!Dr(t))throw t;e.v_.add(1),yield Rr(e),e.x_.set("Offline"),n||(n=()=>Kd(e.localStore)),e.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){_("RemoteStore","Retrying IndexedDB access"),yield n(),e.v_.delete(1),yield cs(e)}))})}function Xd(e,t){return t().catch(n=>$i(e,n,t))}function ls(e){return y(this,null,function*(){let t=x(e),n=we(t),r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Xg(t);)try{let i=yield zg(t.localStore,r);if(i===null){t.D_.length===0&&n.Xo();break}r=i.batchId,Jg(t,i)}catch(i){yield $i(t,i)}Jd(t)&&Zd(t)})}function Xg(e){return Ke(e)&&e.D_.length<10}function Jg(e,t){e.D_.push(t);let n=we(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Jd(e){return Ke(e)&&!we(e).Ho()&&e.D_.length>0}function Zd(e){we(e).start()}function Zg(e){return y(this,null,function*(){we(e).d_()})}function tp(e){return y(this,null,function*(){let t=we(e);for(let n of e.D_)t.I_(n.mutations)})}function ep(e,t,n){return y(this,null,function*(){let r=e.D_.shift(),i=da.from(r,t,n);yield Xd(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield ls(e)})}function np(e,t){return y(this,null,function*(){t&&we(e).P_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return wg(o)&&o!==m.ABORTED}(i.code)){let s=r.D_.shift();we(r).Zo(),yield Xd(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ls(r)}})}(e,t)),Jd(e)&&Zd(e)})}function id(e,t){return y(this,null,function*(){let n=x(e);n.asyncQueue.verifyOperationInProgress(),_("RemoteStore","RemoteStore received new credentials");let r=Ke(n);n.v_.add(3),yield Rr(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),yield cs(n)})}function rp(e,t){return y(this,null,function*(){let n=x(e);t?(n.v_.delete(2),yield cs(n)):t||(n.v_.add(2),yield Rr(n),n.x_.set("Unknown"))})}function kn(e){return e.N_||(e.N_=function(n,r,i){let s=x(n);return s.R_(),new Qa(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:Wg.bind(null,e),To:Hg.bind(null,e),u_:Yg.bind(null,e)}),e.F_.push(t=>y(this,null,function*(){t?(e.N_.Zo(),Pc(e)?Rc(e):e.x_.set("Unknown")):(yield e.N_.stop(),Yd(e))}))),e.N_}function we(e){return e.B_||(e.B_=function(n,r,i){let s=x(n);return s.R_(),new Wa(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:Zg.bind(null,e),To:np.bind(null,e),E_:tp.bind(null,e),T_:ep.bind(null,e)}),e.F_.push(t=>y(this,null,function*(){t?(e.B_.Zo(),yield ls(e)):(yield e.B_.stop(),e.D_.length>0&&(_("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.B_}var Ja=class e{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){let o=Date.now()+r,a=new e(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(m.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function kc(e,t){if(Qt("AsyncQueue",`${t}: ${e}`),Dr(e))return new w(m.UNAVAILABLE,`${t}: ${e}`);throw e}var Ki=class e{constructor(t){this.comparator=t?(n,r)=>t(n,r)||I.comparator(n.key,r.key):(n,r)=>I.comparator(n.key,r.key),this.keyedMap=hr(),this.sortedSet=new G(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}};var Qi=class{constructor(){this.L_=new G(I.comparator)}track(t){let n=t.doc.key,r=this.L_.get(n);r?t.type!==0&&r.type===3?this.L_=this.L_.insert(n,t):t.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.L_=this.L_.remove(n):t.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:t.doc}):b():this.L_=this.L_.insert(n,t)}k_(){let t=[];return this.L_.inorderTraversal((n,r)=>{t.push(r)}),t}},xn=class e{constructor(t,n,r,i,s,o,a,c,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new e(t,n,Ki.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ss(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Za=class{constructor(){this.q_=void 0,this.Q_=[]}},tc=class{constructor(){this.queries=new ve(t=>Ed(t),ss),this.onlineState="Unknown",this.K_=new Set}};function ip(e,t){return y(this,null,function*(){let n=x(e),r=t.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Za),i)try{s.q_=yield n.onListen(r)}catch(o){let a=kc(o,`Initialization of query '${dn(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&Vc(n)})}function sp(e,t){return y(this,null,function*(){let n=x(e),r=t.query,i=!1,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(t);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function op(e,t){let n=x(e),r=!1;for(let i of t){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&Vc(n)}function ap(e,t,n){let r=x(e),i=r.queries.get(t);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(t)}function Vc(e){e.K_.forEach(t=>{t.next()})}var ec=class{constructor(t,n,r){this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(t){if(!this.options.includeMetadataChanges){let r=[];for(let i of t.docChanges)i.type!==3&&r.push(i);t=new xn(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.z_?this.H_(t)&&(this.G_.next(t),n=!0):this.J_(t,this.onlineState)&&(this.Y_(t),n=!0),this.j_=t,n}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),n=!0),n}J_(t,n){if(!t.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}H_(t){if(t.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(t){t=xn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}};var Wi=class{constructor(t){this.key=t}},Hi=class{constructor(t){this.key=t}},nc=class{constructor(t,n){this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=R(),this.mutatedKeys=R(),this.ua=bd(t),this.ca=new Ki(this.ua)}get la(){return this.oa}ha(t,n){let r=n?n.Pa:new Qi,i=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((u,h)=>{let d=i.get(u),f=os(this.query,h)?h:null,E=!!d&&this.mutatedKeys.has(d.key),T=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;d&&f?d.data.isEqual(f.data)?E!==T&&(r.track({type:3,doc:f}),v=!0):this.Ia(d,f)||(r.track({type:2,doc:f}),v=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),v=!0):d&&!f&&(r.track({type:1,doc:d}),v=!0,(c||l)&&(a=!0)),v&&(f?(o=o.add(f),s=T?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){let s=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;let o=t.Pa.k_();o.sort((u,h)=>function(f,E){let T=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return b()}};return T(f)-T(E)}(u.type,h.type)||this.ua(u.doc,h.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,l=c!==this._a;return this._a=c,o.length!==0||l?{snapshot:new xn(this.query,t.ca,s,o,t.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Qi,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=t.current)}Ea(){if(!this.current)return[];let t=this.aa;this.aa=R(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return t.forEach(r=>{this.aa.has(r)||n.push(new Hi(r))}),this.aa.forEach(r=>{t.has(r)||n.push(new Wi(r))}),n}Ra(t){this.oa=t.hs,this.aa=R();let n=this.ha(t.documents);return this.applyChanges(n,!0)}Va(){return xn.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},rc=class{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}},ic=class{constructor(t){this.key=t,this.ma=!1}},sc=class{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new ve(a=>Ed(a),ss),this.pa=new Map,this.ya=new Set,this.wa=new G(I.comparator),this.Sa=new Map,this.ba=new Er,this.Da={},this.Ca=new Map,this.va=Tr.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function cp(e,t){return y(this,null,function*(){let n=yp(e),r,i,s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{let o=yield Gg(n.localStore,Gt(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield lp(n,t,r,a==="current",o.resumeToken),n.isPrimaryClient&&Qd(n.remoteStore,o)}return i})}function lp(e,t,n,r,i){return y(this,null,function*(){e.Ma=(h,d,f)=>function(T,v,A,N){return y(this,null,function*(){let F=v.view.ha(A);F.Xi&&(F=yield rd(T.localStore,v.query,!1).then(({documents:He})=>v.view.ha(He,F)));let W=N&&N.targetChanges.get(v.targetId),Te=N&&N.targetMismatches.get(v.targetId)!=null,ut=v.view.applyChanges(F,T.isPrimaryClient,W,Te);return od(T,v.targetId,ut.da),ut.snapshot})}(e,h,d,f);let s=yield rd(e.localStore,t,!0),o=new nc(t,s.hs),a=o.ha(s.documents),c=wr.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,c);od(e,n,l.da);let u=new rc(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot})}function up(e,t){return y(this,null,function*(){let n=x(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!ss(s,t))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ua(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Wd(n.remoteStore,r.targetId),oc(n,r.targetId)}).catch(xr))):(oc(n,r.targetId),yield Ua(n.localStore,r.targetId,!0))})}function hp(e,t,n){return y(this,null,function*(){let r=vp(e);try{let i=yield function(o,a){let c=x(o),l=tt.now(),u=a.reduce((f,E)=>f.add(E.key),R()),h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let E=ce(),T=R();return c.os.getEntries(f,u).next(v=>{E=v,E.forEach((A,N)=>{N.isValidDocument()||(T=T.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,E)).next(v=>{h=v;let A=[];for(let N of a){let F=vg(N,h.get(N.key).overlayedDocument);F!=null&&A.push(new Yt(N.key,F,pd(F.value.mapValue),ae.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,A,a)}).next(v=>{d=v;let A=v.applyToLocalDocumentSet(h,T);return c.documentOverlayCache.saveOverlays(f,v.batchId,A)})}).then(()=>({batchId:d.batchId,changes:Cd(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Da[o.currentUser.toKey()];l||(l=new G(k)),l=l.insert(a,c),o.Da[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Pr(r,i.changes),yield ls(r.remoteStore)}catch(i){let s=kc(i,"Failed to persist write");n.reject(s)}})}function tm(e,t){return y(this,null,function*(){let n=x(e);try{let r=yield jg(n.localStore,t);t.targetChanges.forEach((i,s)=>{let o=n.Sa.get(s);o&&(O(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?O(o.ma):i.removedDocuments.size>0&&(O(o.ma),o.ma=!1))}),yield Pr(n,r,t)}catch(r){yield xr(r)}})}function sd(e,t,n){let r=x(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((s,o)=>{let a=o.view.U_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=x(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let d of h.Q_)d.U_(a)&&(l=!0)}),l&&Vc(c)}(r.eventManager,t),i.length&&r.fa.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function dp(e,t,n){return y(this,null,function*(){let r=x(e);r.sharedClientState.updateQueryState(t,"rejected",n);let i=r.Sa.get(t),s=i&&i.key;if(s){let o=new G(I.comparator);o=o.insert(s,Pt.newNoDocument(s,D.min()));let a=R().add(s),c=new Oi(D.min(),new Map,new G(k),o,a);yield tm(r,c),r.wa=r.wa.remove(s),r.Sa.delete(t),Nc(r)}else yield Ua(r.localStore,t,!1).then(()=>oc(r,t,n)).catch(xr)})}function mp(e,t){return y(this,null,function*(){let n=x(e),r=t.batch.batchId;try{let i=yield Bg(n.localStore,t);nm(n,r,null),em(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Pr(n,i)}catch(i){yield xr(i)}})}function fp(e,t,n){return y(this,null,function*(){let r=x(e);try{let i=yield function(o,a){let c=x(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(O(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,t);nm(r,t,n),em(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield Pr(r,i)}catch(i){yield xr(i)}})}function em(e,t){(e.Ca.get(t)||[]).forEach(n=>{n.resolve()}),e.Ca.delete(t)}function nm(e,t,n){let r=x(e),i=r.Da[r.currentUser.toKey()];if(i){let s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function oc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach(r=>{e.ba.containsKey(r)||rm(e,r)})}function rm(e,t){e.ya.delete(t.path.canonicalString());let n=e.wa.get(t);n!==null&&(Wd(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Nc(e))}function od(e,t,n){for(let r of n)r instanceof Wi?(e.ba.addReference(r.key,t),gp(e,r)):r instanceof Hi?(_("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||rm(e,r.key)):b()}function gp(e,t){let n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(_("SyncEngine","New document in limbo: "+n),e.ya.add(r),Nc(e))}function Nc(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){let t=e.ya.values().next().value;e.ya.delete(t);let n=new I(z.fromString(t)),r=e.va.next();e.Sa.set(r,new ic(n)),e.wa=e.wa.insert(n,r),Qd(e.remoteStore,new Ir(Gt(Sc(n.path)),r,"TargetPurposeLimboResolution",md._e))}}function Pr(e,t,n){return y(this,null,function*(){let r=x(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=La.Ki(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),r.fa.u_(i),yield function(c,l){return y(this,null,function*(){let u=x(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>g.forEach(l,d=>g.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>g.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Dr(h))throw h;_("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let d=h.targetId;if(!h.fromCache){let f=u.ns.get(d),E=f.snapshotVersion,T=f.withLastLimboFreeSnapshotVersion(E);u.ns=u.ns.insert(d,T)}}})}(r.localStore,s))})}function pp(e,t){return y(this,null,function*(){let n=x(e);if(!n.currentUser.isEqual(t)){_("SyncEngine","User change. New user:",t.toKey());let r=yield $d(n.localStore,t);n.currentUser=t,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new w(m.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield Pr(n,r.us)}})}function _p(e,t){let n=x(e),r=n.Sa.get(t);if(r&&r.ma)return R().add(r.key);{let i=R(),s=n.pa.get(t);if(!s)return i;for(let o of s){let a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function yp(e){let t=x(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_p.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dp.bind(null,t),t.fa.u_=op.bind(null,t.eventManager),t.fa.xa=ap.bind(null,t.eventManager),t}function vp(e){let t=x(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fp.bind(null,t),t}var Yi=class{constructor(){this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=as(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return qg(this.persistence,new Ba,t.initialUser,this.serializer)}createPersistence(t){return new Oa(Fa.Hr,this.serializer)}createSharedClientState(t){return new za}terminate(){return y(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ac=class{initialize(t,n){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pp.bind(null,this.syncEngine),yield rp(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new tc}()}createDatastore(t){let n=as(t.databaseInfo.databaseId),r=function(s){return new Ka(s)}(t.databaseInfo);return function(s,o,a,c){return new Ha(s,o,a,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Xa(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>sd(this.syncEngine,n,0),function(){return Ui.D()?new Ui:new Ga}())}createSyncEngine(t,n){return function(i,s,o,a,c,l,u){let h=new sc(i,s,o,a,c,l);return u&&(h.Fa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var t;yield function(r){return y(this,null,function*(){let i=x(r);_("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Rr(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var cc=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Qt("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}};var lc=class{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=X.UNAUTHENTICATED,this.clientId=xi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>y(this,null,function*(){_("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(_("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(m.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let r=kc(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}};function Mo(e,t){return y(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),_("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield $d(t.localStore,i),r=i)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function ad(e,t){return y(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield Ip(e);_("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>id(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>id(t.remoteStore,i)),e._onlineComponents=t})}function wp(e){return e.name==="FirebaseError"?e.code===m.FAILED_PRECONDITION||e.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function Ip(e){return y(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Mo(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!wp(n))throw n;_n("Error using user provided cache. Falling back to memory cache: "+n),yield Mo(e,new Yi)}}else _("FirestoreClient","Using default OfflineComponentProvider"),yield Mo(e,new Yi);return e._offlineComponents})}function Oc(e){return y(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(_("FirestoreClient","Using user provided OnlineComponentProvider"),yield ad(e,e._uninitializedComponentsProvider._online)):(_("FirestoreClient","Using default OnlineComponentProvider"),yield ad(e,new ac))),e._onlineComponents})}function Tp(e){return Oc(e).then(t=>t.syncEngine)}function Ep(e){return Oc(e).then(t=>t.datastore)}function cd(e){return y(this,null,function*(){let t=yield Oc(e),n=t.eventManager;return n.onListen=cp.bind(null,t.syncEngine),n.onUnlisten=up.bind(null,t.syncEngine),n})}function im(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var ld=new Map;function sm(e,t,n){if(!n)throw new w(m.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bp(e,t,n,r){if(t===!0&&r===!0)throw new w(m.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ud(e){if(!I.isDocumentKey(e))throw new w(m.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function hd(e){if(I.isDocumentKey(e))throw new w(m.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Mc(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":b()}function Kt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new w(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Mc(e);throw new w(m.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}var Xi=class{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new w(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new w(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}bp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=im((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new w(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new w(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new w(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Dn=class{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xi({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new w(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xi(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fo;switch(r.type){case"firstParty":return new jo(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(m.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ld.get(n);r&&(_("ComponentProvider","Removing Datastore"),ld.delete(n),r.terminate())}(this),Promise.resolve()}};function om(e,t,n,r={}){var i;let s=(e=Kt(e,Dn))._getSettings(),o=`${t}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&_n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=X.MOCK_USER;else{a=ql(r.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new w(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new X(l)}e._authCredentials=new Lo(new Si(a,c))}}var Ji=class e{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},mt=class e{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pe(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},pe=class e extends Ji{constructor(t,n,r){super(t,n,Sc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new mt(this.firestore,null,new I(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function am(e,t,...n){if(e=Ft(e),sm("collection","path",t),e instanceof Dn){let r=z.fromString(t,...n);return hd(r),new pe(e,null,r)}{if(!(e instanceof mt||e instanceof pe))throw new w(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(z.fromString(t,...n));return hd(r),new pe(e.firestore,null,r)}}function cm(e,t,...n){if(e=Ft(e),arguments.length===1&&(t=xi.newId()),sm("doc","path",t),e instanceof Dn){let r=z.fromString(t,...n);return ud(r),new mt(e,null,new I(r))}{if(!(e instanceof mt||e instanceof pe))throw new w(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=e._path.child(z.fromString(t,...n));return ud(r),new mt(e.firestore,e instanceof pe?e.converter:null,new I(r))}}var uc=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new zi(this,"async_queue_retry"),this._u=()=>{let n=Oo();n&&_("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let t=Oo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;let n=Oo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});let n=new Rt;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}cu(){return y(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Dr(t))throw t;_("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(t){let n=this.Xa.then(()=>(this.iu=!0,t().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Qt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(t,n,r){this.au(),this.ou.indexOf(t)>-1&&(n=0);let i=Ja.createAndSchedule(this,t,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&b()}verifyOperationInProgress(){}hu(){return y(this,null,function*(){let t;do t=this.Xa,yield t;while(t!==this.Xa)})}Pu(t){for(let n of this.nu)if(n.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){let n=this.nu.indexOf(t);this.nu.splice(n,1)}};function dd(e){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(e,["next","error","complete"])}var le=class extends Dn{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new uc}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||um(this),this._firestoreClient.terminate()}};function lm(e,t){let n=typeof e=="object"?e:Wl(),r=typeof e=="string"?e:t||"(default)",i=Kl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ll("firestore");s&&om(i,...s)}return i}function Fc(e){return e._firestoreClient||um(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function um(e){var t,n,r;let i=e._freezeSettings(),s=function(a,c,l,u){return new Ho(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,im(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new lc(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var hc=class{constructor(t="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=t}},dc=class{constructor(t,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}};var br=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(lt.fromBase64String(t))}catch(n){throw new w(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(lt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Rn=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new w(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Ar=class{constructor(t){this._methodName=t}};var Cr=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new w(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new w(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return k(this._lat,t._lat)||k(this._long,t._long)}};var Ap=/^__.*__$/,mc=class{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Yt(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ge(t,this.data,n,this.fieldTransforms)}},Zi=class{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Yt(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function hm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw b()}}var fc=class e{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Au({path:r,Vu:!1});return i.mu(t),i}fu(t){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return es(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if(hm(this.du)&&Ap.test(t))throw this.pu('Document fields cannot begin and end with "__"')}},gc=class{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||as(t)}Su(t,n,r,i=!1){return new fc({du:t,methodName:n,wu:r,path:_t.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dm(e){let t=e._freezeSettings(),n=as(e._databaseId);return new gc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cp(e,t,n,r,i,s={}){let o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);Lc("Data must be an object, but it was:",o,r);let a=mm(r,o),c,l;if(s.merge)c=new Et(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let h of s.mergeFields){let d=pc(t,h,n);if(!o.contains(d))throw new w(m.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);gm(u,d)||u.push(d)}c=new Et(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new mc(new pt(a),c,l)}var ts=class e extends Ar{_toFieldTransform(t){if(t.du!==2)throw t.du===1?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function Sp(e,t,n,r){let i=e.Su(1,t,n);Lc("Data must be an object, but it was:",i,r);let s=[],o=pt.empty();$e(r,(c,l)=>{let u=qc(t,c,n);l=Ft(l);let h=i.fu(u);if(l instanceof ts)s.push(u);else{let d=us(l,h);d!=null&&(s.push(u),o.set(u,d))}});let a=new Et(s);return new Zi(o,a,i.fieldTransforms)}function xp(e,t,n,r,i,s){let o=e.Su(1,t,n),a=[pc(t,r,n)],c=[i];if(s.length%2!=0)throw new w(m.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(pc(t,s[d])),c.push(s[d+1]);let l=[],u=pt.empty();for(let d=a.length-1;d>=0;--d)if(!gm(l,a[d])){let f=a[d],E=c[d];E=Ft(E);let T=o.fu(f);if(E instanceof ts)l.push(f);else{let v=us(E,T);v!=null&&(l.push(f),u.set(f,v))}}let h=new Et(l);return new Zi(u,h,o.fieldTransforms)}function us(e,t){if(fm(e=Ft(e)))return Lc("Unsupported field value:",t,e),mm(e,t);if(e instanceof Ar)return function(r,i){if(!hm(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=us(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fg(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=tt.fromDate(r);return{timestampValue:qi(i.serializer,s)}}if(r instanceof tt){let s=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qi(i.serializer,s)}}if(r instanceof Cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof br)return{bytesValue:Fd(i.serializer,r._byteString)};if(r instanceof mt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xc(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Mc(r)}`)}(e,t)}function mm(e,t){let n={};return fd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$e(e,(r,i)=>{let s=us(i,t.Ru(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function fm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof tt||e instanceof Cr||e instanceof br||e instanceof mt||e instanceof Ar)}function Lc(e,t,n){if(!fm(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Mc(n);throw r==="an object"?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function pc(e,t,n){if((t=Ft(t))instanceof Rn)return t._internalPath;if(typeof t=="string")return qc(e,t);throw es("Field path arguments must be of type string or ",e,!1,void 0,n)}var Dp=new RegExp("[~\\*/\\[\\]]");function qc(e,t,n){if(t.search(Dp)>=0)throw es(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Rn(...t.split("."))._internalPath}catch{throw es(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function es(e,t,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new w(m.INVALID_ARGUMENT,a+e+c)}function gm(e,t){return e.some(n=>n.isEqual(t))}var ns=class{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new _c(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(pm("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},_c=class extends ns{data(){return super.data()}};function pm(e,t){return typeof t=="string"?qc(e,t):t instanceof Rn?t._internalPath:t._delegate._internalPath}function Rp(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new w(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yc=class{convertValue(t,n="none"){switch(je(t)){case 0:return null;case 1:return t.booleanValue;case 2:return U(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ye(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw b()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let r={};return $e(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Cr(U(t.latitude),U(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":let r=Ec(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_r(t));default:return null}}convertTimestamp(t){let n=_e(t);return new tt(n.seconds,n.nanos)}convertDocumentKey(t,n){let r=z.fromString(t);O(Gd(r));let i=new Vi(r.get(1),r.get(3)),s=new I(r.popFirst(5));return i.isEqual(n)||Qt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Pp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}function _m(){return new hc("count")}var Fe=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},rs=class extends ns{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new pn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let r=this._document.data.field(pm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},pn=class extends rs{data(t={}){return super.data(t)}},vc=class{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fe(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new pn(this._firestore,this._userDataWriter,r.key,r,new Fe(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new pn(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fe(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new pn(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fe(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:kp(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function kp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return b()}}var Sr=class extends yc{constructor(t){super(),this.firestore=t}convertBytes(t){return new br(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new mt(this.firestore,null,n)}};function ym(e,t,n){e=Kt(e,mt);let r=Kt(e.firestore,le),i=Pp(e.converter,t,n);return jc(r,[Cp(dm(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ae.none())])}function vm(e,t,n,...r){e=Kt(e,mt);let i=Kt(e.firestore,le),s=dm(i),o;return o=typeof(t=Ft(t))=="string"||t instanceof Rn?xp(s,"updateDoc",e._key,t,n,r):Sp(s,"updateDoc",e._key,t),jc(i,[o.toMutation(e._key,ae.exists(!0))])}function wm(e){return jc(Kt(e.firestore,le),[new vr(e._key,ae.none())])}function Bc(e,...t){var n,r,i;e=Ft(e);let s={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||dd(t[o])||(s=t[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(dd(t[o])){let h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),t[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(e instanceof mt)l=Kt(e.firestore,le),u=Sc(e._key.path),c={next:h=>{t[o]&&t[o](Vp(l,e,h))},error:t[o+1],complete:t[o+2]};else{let h=Kt(e,Ji);l=Kt(h.firestore,le),u=h._query;let d=new Sr(l);c={next:f=>{t[o]&&t[o](new vc(l,d,h,f))},error:t[o+1],complete:t[o+2]},Rp(e._query)}return function(d,f,E,T){let v=new cc(T),A=new ec(f,v,E);return d.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return ip(yield cd(d),A)})),()=>{v.La(),d.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return sp(yield cd(d),A)}))}}(Fc(l),u,a,c)}function jc(e,t){return function(r,i){let s=new Rt;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return hp(yield Tp(r),i,s)})),s.promise}(Fc(e),t)}function Vp(e,t,n){let r=n.docs.get(t._key),i=new Sr(e);return new rs(e,i,t._key,r,new Fe(n.hasPendingWrites,n.fromCache),t.converter)}function Uc(e){return Im(e,{count:_m()})}function Im(e,t){let n=Kt(e.firestore,le),r=Fc(n),i=function(o,a){let c=[];for(let l in o)Object.prototype.hasOwnProperty.call(o,l)&&c.push(a(o[l],l,o));return c}(t,(s,o)=>new fa(o,s.aggregateType,s._internalFieldPath));return function(o,a,c){let l=new Rt;return o.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){try{let u=yield Ep(o);l.resolve(Qg(u,a,c))}catch(u){l.reject(u)}})),l.promise}(r,e._query,i).then(s=>function(a,c,l){let u=new Sr(a);return new dc(c,u,l)}(n,e,s))}(function(t,n=!0){(function(i){Pn=i})(Ql),$l(new zl("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new le(new qo(r.getProvider("auth-internal")),new zo(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new w(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ln(Fh,"4.4.2",t),Ln(Fh,"4.4.2","esm2017")})();var hs=function(){return hs=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},hs.apply(this,arguments)};var Op={includeMetadataChanges:!1};function zc(e,t){return t===void 0&&(t=Op),new rl(function(n){var r=Bc(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Tm(e){return zc(e,{includeMetadataChanges:!0})}function Em(e,t){return t===void 0&&(t={}),Tm(e).pipe(Ee(function(n){return Gc(n,t)}))}function Gc(e,t){var n;t===void 0&&(t={});var r=e.data(t);return!e.exists()||typeof r!="object"||r===null||!t.idField?r:hs(hs({},r),(n={},n[t.idField]=e.id,n))}function bm(e){return zc(e,{includeMetadataChanges:!0}).pipe(Ee(function(t){return t.docs}))}function Am(e,t){return t===void 0&&(t={}),bm(e).pipe(Ee(function(n){return n.map(function(r){return Gc(r,t)})}))}var Qe=class{constructor(t){return t}},Cm="firestore",$c=class{constructor(){return Xl(Cm)}};var Kc=new nt("angularfire2.firestore-instances");function Mp(e,t){let n=Yl(Cm,e,t);return n&&new Qe(n)}function Fp(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new Qe(r)}}var Lp={provide:$c,deps:[[new On,Kc]]},qp={provide:Qe,useFactory:Mp,deps:[[new On,Kc],tu]},Bp=(()=>{class e{constructor(){Ln("angularfire",Hl.full,"fst")}static \u0275fac=function(r){return new(r||e)};static \u0275mod=yt({type:e});static \u0275inj=vt({providers:[qp,Lp]})}return e})();function pv(e,...t){return{ngModule:Bp,providers:[{provide:Kc,useFactory:Fp(e),multi:!0,deps:[Ot,Nt,Zl,eu,[new On,ru],[new On,Jl],...t]}]}}var _v=Lt(Am,!0);var Sm=Lt(Em,!0);var yv=Lt(am,!0);var vv=Lt(wm,!0);var xm=Lt(cm,!0);var wv=Lt(Uc,!0);var Iv=Lt(lm,!0);var Tv=Lt(ym,!0);var Dm=Lt(vm,!0);var $p=["trigger"],Kp=["panel"];function Qp(e,t){if(e&1&&(L(0,"span",9),It(1),B()),e&2){let n=Ce();rt(),de(n.placeholder)}}function Wp(e,t){e&1&&ks(0)}function Hp(e,t){if(e&1&&(L(0,"span",11),It(1),B()),e&2){let n=Ce(2);rt(),de(n.triggerValue)}}function Yp(e,t){if(e&1&&(L(0,"span",10),he(1,Wp,1,0)(2,Hp,2,1),B()),e&2){let n=Ce();rt(),Rs(1,n.customTrigger?1:2)}}function Xp(e,t){if(e&1){let n=ml();Es(),ol(),L(0,"div",12,13),At("@transformPanel.done",function(i){Is(n);let s=Ce();return Ts(s._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){Is(n);let s=Ce();return Ts(s._handleKeydown(i))}),ks(2,1),B()}if(e&2){let n=Ce();dl("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",n._getPanelTheme(),""),xs("ngClass",n.panelClass)("@transformPanel","showing"),wt("id",n.id+"-panel")("aria-multiselectable",n.multiple)("aria-label",n.ariaLabel||null)("aria-labelledby",n._getPanelAriaLabelledby())}}var Jp=[[["mat-select-trigger"]],"*"],Zp=["mat-select-trigger","*"],t_={transformPanelWrap:Ls("transformPanelWrap",[Kr("* => void",lu("@transformPanel",[cu()],{optional:!0}))]),transformPanel:Ls("transformPanel",[au("void",$r({opacity:0,transform:"scale(1, 0.8)"})),Kr("void => showing",qs("120ms cubic-bezier(0, 0, 0.2, 1)",$r({opacity:1,transform:"scale(1, 1)"}))),Kr("* => void",qs("100ms linear",$r({opacity:0})))])};var Nm=0,Mm=new nt("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let e=bt(St);return()=>e.scrollStrategies.reposition()}});function e_(e){return()=>e.scrollStrategies.reposition()}var n_=new nt("MAT_SELECT_CONFIG"),r_={provide:Mm,deps:[St],useFactory:e_},i_=new nt("MatSelectTrigger"),Qc=class{constructor(t,n){this.source=t,this.value=n}},e0=(()=>{let t=class t{_scrollOptionIntoView(r){let i=this.options.toArray()[r];if(i){let s=this.panel.nativeElement,o=Pl(r,this.options,this.optionGroups),a=i._getHostElement();r===0&&o===1?s.scrollTop=0:s.scrollTop=kl(a.offsetTop,a.offsetHeight,s.scrollTop,s.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(r){return new Qc(this,r)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(r){this._hideSingleSelectionIndicator=r,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(r){this._placeholder=r,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Nl.required)??!1}set required(r){this._required=r,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(r){this._selectionModel,this._multiple=r}get compareWith(){return this._compareWith}set compareWith(r){this._compareWith=r,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(r){this._assignValue(r)&&this._onChange(r)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(r){this._errorStateTracker.matcher=r}get id(){return this._id}set id(r){this._id=r||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(r){this._errorStateTracker.errorState=r}constructor(r,i,s,o,a,c,l,u,h,d,f,E,T,v){this._viewportRuler=r,this._changeDetectorRef=i,this._ngZone=s,this._elementRef=a,this._dir=c,this._parentFormField=h,this.ngControl=d,this._liveAnnouncer=T,this._defaultOptions=v,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(A,N)=>A===N,this._uid=`mat-select-${Nm++}`,this._triggerAriaLabelledBy=null,this._destroy=new ft,this.stateChanges=new ft,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${Nm++}`,this._panelDoneAnimatingStream=new ft,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this.optionSelectionChanges=Ye(()=>{let A=this.options;return A?A.changes.pipe(kt(A),Vn(()=>Xe(...A.map(N=>N.onSelectionChange)))):this._ngZone.onStable.pipe(be(1),Vn(()=>this.optionSelectionChanges))}),this.openedChange=new ue,this._openedStream=this.openedChange.pipe(Zt(A=>A),Ee(()=>{})),this._closedStream=this.openedChange.pipe(Zt(A=>!A),Ee(()=>{})),this.selectionChange=new ue,this.valueChange=new ue,this._trackedModal=null,this._skipPredicate=A=>this.panelOpen?!1:A.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),v?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=v.typeaheadDebounceInterval),this._errorStateTracker=new Cl(o,d,u,l,this.stateChanges),this._scrollStrategyFactory=E,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(f)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Vl(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(ws(),Ae(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Ae(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Ae(this._destroy)).subscribe(r=>{r.added.forEach(i=>i.select()),r.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(kt(null),Ae(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let r=this._getTriggerAriaLabelledby(),i=this.ngControl;if(r!==this._triggerAriaLabelledBy){let s=this._elementRef.nativeElement;this._triggerAriaLabelledBy=r,r?s.setAttribute("aria-labelledby",r):s.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(r){(r.disabled||r.userAriaDescribedBy)&&this.stateChanges.next(),r.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let r=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!r)return;let i=`${this.id}-panel`;this._trackedModal&&Os(this._trackedModal,"aria-owns",i),Tl(r,"aria-owns",i),this._trackedModal=r}_clearFromModal(){if(!this._trackedModal)return;let r=`${this.id}-panel`;Os(this._trackedModal,"aria-owns",r),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(r){this._assignValue(r)}registerOnChange(r){this._onChange=r}registerOnTouched(r){this._onTouched=r}setDisabledState(r){this.disabled=r,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let r=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&r.reverse(),r.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(r){this.disabled||(this.panelOpen?this._handleOpenKeydown(r):this._handleClosedKeydown(r))}_handleClosedKeydown(r){let i=r.keyCode,s=i===40||i===38||i===37||i===39,o=i===13||i===32,a=this._keyManager;if(!a.isTyping()&&o&&!xe(r)||(this.multiple||r.altKey)&&s)r.preventDefault(),this.open();else if(!this.multiple){let c=this.selected;a.onKeydown(r);let l=this.selected;l&&c!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(r){let i=this._keyManager,s=r.keyCode,o=s===40||s===38,a=i.isTyping();if(o&&r.altKey)r.preventDefault(),this.close();else if(!a&&(s===13||s===32)&&i.activeItem&&!xe(r))r.preventDefault(),i.activeItem._selectViaInteraction();else if(!a&&this._multiple&&s===65&&r.ctrlKey){r.preventDefault();let c=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(c?l.select():l.deselect())})}else{let c=i.activeItemIndex;i.onKeydown(r),this._multiple&&o&&r.shiftKey&&i.activeItem&&i.activeItemIndex!==c&&i.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(be(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(r){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&r)Array.isArray(r),r.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(r);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(r){let i=this.options.find(s=>{if(this._selectionModel.isSelected(s))return!1;try{return s.value!=null&&this._compareWith(s.value,r)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(r){return r!==this._value||this._multiple&&Array.isArray(r)?(this.options&&this._setSelectionByValue(r),this._value=r,!0):!1}_getOverlayWidth(r){return this.panelWidth==="auto"?(r instanceof Bs?r.elementRef:r||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let r of this.options)r._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new El(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let r=Xe(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ae(r)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Xe(...this.options.map(i=>i._stateChanges)).pipe(Ae(r)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(r,i){let s=this._selectionModel.isSelected(r);r.value==null&&!this._multiple?(r.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(r.value)):(s!==r.selected&&(r.selected?this._selectionModel.select(r):this._selectionModel.deselect(r)),i&&this._keyManager.setActiveItem(r),this.multiple&&(this._sortValues(),i&&this.focus())),s!==this._selectionModel.isSelected(r)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let r=this.options.toArray();this._selectionModel.sort((i,s)=>this.sortComparator?this.sortComparator(i,s,r):r.indexOf(i)-r.indexOf(s)),this.stateChanges.next()}}_propagateChanges(r){let i;this.multiple?i=this.selected.map(s=>s.value):i=this.selected?this.selected.value:r,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let r=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){r=i;break}this._keyManager.setActiveItem(r)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(r){this._elementRef.nativeElement.focus(r)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let r=this._parentFormField?.getLabelId(),i=r?r+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:r}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let r=this._parentFormField?.getLabelId(),i=(r?r+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(r){this.openedChange.emit(r)}setDescribedByIds(r){r.length?this._elementRef.nativeElement.setAttribute("aria-describedby",r.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}};t.\u0275fac=function(i){return new(i||t)(C(uu),C(Ze),C(Ot),C(Sl),C(te),C(Mn,8),C(Ml,8),C(Fl,8),C(fu,8),C(Ol,10),cl("tabindex"),C(Mm),C(bl),C(n_,8))},t.\u0275cmp=ht({type:t,selectors:[["mat-select"]],contentQueries:function(i,s,o){if(i&1&&(Fr(o,i_,5),Fr(o,Rl,5),Fr(o,Dl,5)),i&2){let a;ne(a=re())&&(s.customTrigger=a.first),ne(a=re())&&(s.options=a),ne(a=re())&&(s.optionGroups=a)}},viewQuery:function(i,s){if(i&1&&(en($p,5),en(Kp,5),en(js,5)),i&2){let o;ne(o=re())&&(s.trigger=o.first),ne(o=re())&&(s.panel=o.first),ne(o=re())&&(s._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,s){i&1&&At("keydown",function(a){return s._handleKeydown(a)})("focus",function(){return s._onFocus()})("blur",function(){return s._onBlur()}),i&2&&(wt("id",s.id)("tabindex",s.disabled?-1:s.tabIndex)("aria-controls",s.panelOpen?s.id+"-panel":null)("aria-expanded",s.panelOpen)("aria-label",s.ariaLabel||null)("aria-required",s.required.toString())("aria-disabled",s.disabled.toString())("aria-invalid",s.errorState)("aria-activedescendant",s._getAriaActiveDescendant()),ee("mat-mdc-select-disabled",s.disabled)("mat-mdc-select-invalid",s.errorState)("mat-mdc-select-required",s.required)("mat-mdc-select-empty",s.empty)("mat-mdc-select-multiple",s.multiple))},inputs:{userAriaDescribedBy:[et.None,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[et.HasDecoratorInputTransform,"disabled","disabled",Se],disableRipple:[et.HasDecoratorInputTransform,"disableRipple","disableRipple",Se],tabIndex:[et.HasDecoratorInputTransform,"tabIndex","tabIndex",r=>r==null?0:nn(r)],hideSingleSelectionIndicator:[et.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Se],placeholder:"placeholder",required:[et.HasDecoratorInputTransform,"required","required",Se],multiple:[et.HasDecoratorInputTransform,"multiple","multiple",Se],disableOptionCentering:[et.HasDecoratorInputTransform,"disableOptionCentering","disableOptionCentering",Se],compareWith:"compareWith",value:"value",ariaLabel:[et.None,"aria-label","ariaLabel"],ariaLabelledby:[et.None,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[et.HasDecoratorInputTransform,"typeaheadDebounceInterval","typeaheadDebounceInterval",nn],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[_l([{provide:mu,useExisting:t},{provide:xl,useExisting:t}]),Mr,bs,dt],ngContentSelectors:Zp,decls:11,vars:8,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(i,s){if(i&1&&(fl(Jp),L(0,"div",0,1),At("click",function(){return s.open()}),L(3,"div",2),he(4,Qp,2,1,"span",3)(5,Yp,3,1),B(),L(6,"div",4)(7,"div",5),Es(),L(8,"svg",6),Mt(9,"path",7),B()()()(),he(10,Xp,3,9,"ng-template",8),At("backdropClick",function(){return s.close()})("attach",function(){return s._onAttached()})("detach",function(){return s.close()})),i&2){let o=gl(1);rt(3),wt("id",s._valueId),rt(),Rs(4,s.empty?4:5),rt(6),xs("cdkConnectedOverlayPanelClass",s._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",s._scrollStrategy)("cdkConnectedOverlayOrigin",s._preferredOverlayOrigin||o)("cdkConnectedOverlayOpen",s.panelOpen)("cdkConnectedOverlayPositions",s._positions)("cdkConnectedOverlayWidth",s._overlayWidth)}},dependencies:[Bs,js,vl],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[t_.transformPanel]},changeDetection:0});let e=t;return e})();var n0=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=vt({providers:[r_],imports:[wl,sn,Ms,Ct,hu,gu,Ms,Ct]});let e=t;return e})();var s_=new nt("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var f0=(()=>{let t=class t{constructor(r,i,s,o,a){this._elementRef=r,this._ngZone=i,this._changeDetectorRef=s,this._animationMode=o,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new ue,this._mode="determinate",this._transitionendHandler=c=>{this.animationEnd.observers.length===0||!c.target||!c.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=o==="NoopAnimations",a&&(a.color&&(this.color=this._defaultColor=a.color),this.mode=a.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(r){this._color=r}get value(){return this._value}set value(r){this._value=Fm(r||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(r){this._bufferValue=Fm(r||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(r){this._mode=r,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}};t.\u0275fac=function(i){return new(i||t)(C(te),C(Ot),C(Ze),C(Nn,8),C(s_,8))},t.\u0275cmp=ht({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,s){i&2&&(wt("aria-valuenow",s._isIndeterminate()?null:s.value)("mode",s.mode),hl("mat-"+s.color),ee("_mat-animation-noopable",s._isNoopAnimation)("mdc-linear-progress--animation-ready",!s._isNoopAnimation)("mdc-linear-progress--indeterminate",s._isIndeterminate()))},inputs:{color:"color",value:[et.HasDecoratorInputTransform,"value","value",nn],bufferValue:[et.HasDecoratorInputTransform,"bufferValue","bufferValue",nn],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[Mr,dt],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,s){i&1&&(L(0,"div",0),Mt(1,"div",1)(2,"div",2),B(),L(3,"div",3),Mt(4,"span",4),B(),L(5,"div",5),Mt(6,"span",4),B()),i&2&&(rt(),Ds("flex-basis",s._getBufferBarFlexBasis()),rt(2),Ds("transform",s._getPrimaryBarTransform()))},styles:[`@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half))}100%{transform:translateX(var(--mdc-linear-progress-primary-full))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color)}.mdc-linear-progress__buffer-dots{background-color:var(--mdc-linear-progress-track-color)}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-color:rgba(0,0,0,0);background-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='rgba(244, 67, 54, 0.25)'/%3E%3C/svg%3E")}}.mdc-linear-progress__buffer-bar{background-color:var(--mdc-linear-progress-track-color)}.mdc-linear-progress{height:max(var(--mdc-linear-progress-track-height), var(--mdc-linear-progress-active-indicator-height))}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress{height:4px}}.mdc-linear-progress__bar{height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{height:var(--mdc-linear-progress-track-height)}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height)}}.mdc-linear-progress__buffer{border-radius:var(--mdc-linear-progress-track-shape)}.mat-mdc-progress-bar{display:block;text-align:start;--mdc-linear-progress-primary-half: 83.67142%;--mdc-linear-progress-primary-full: 200.611057%;--mdc-linear-progress-secondary-quarter: 37.651913%;--mdc-linear-progress-secondary-half: 84.386165%;--mdc-linear-progress-secondary-full: 160.277782%;--mdc-linear-progress-primary-half-neg: -83.67142%;--mdc-linear-progress-primary-full-neg: -200.611057%;--mdc-linear-progress-secondary-quarter-neg: -37.651913%;--mdc-linear-progress-secondary-half-neg: -84.386165%;--mdc-linear-progress-secondary-full-neg: -160.277782%}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}`],encapsulation:2,changeDetection:0});let e=t;return e})();function Fm(e,t=0,n=100){return Math.max(t,Math.min(n,e))}var g0=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=vt({imports:[Ct]});let e=t;return e})();function Wc(e,t){let n=!t?.manualCleanup;n&&!t?.injector&&al(Wc);let r=n?t?.injector?.get(Ss)??bt(Ss):null,i;t?.requireSync?i=Cs({kind:0}):i=Cs({kind:1,value:t?.initialValue});let s=e.subscribe({next:o=>i.set({kind:1,value:o}),error:o=>{if(t?.rejectErrors)throw o;i.set({kind:2,error:o})}});return r?.onDestroy(s.unsubscribe.bind(s)),ul(()=>{let o=i();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new sl(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}var x0=(()=>{let t=class t{constructor(r,i){this.auth=r,this.fs=i,this.uid="";let s=iu(this.auth).pipe(kt(null),Vn(o=>o?(console.log(`UserData: monitoring uid: ${o.uid}`),Sm(this._doc(o.uid))):(console.log("UserData: Firebase user null.  Stop monitoring user date  "),Or(null))),il(1));this.user=Wc(s)}updateDetails(r){return y(this,null,function*(){return Dm(this._getUserDoc(),r)})}_doc(r){return xm(this.fs,"users/"+r)}_getUserDoc(){return this._doc(this.uid)}};t.\u0275fac=function(i){return new(i||t)(q(nu),q(Qe))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function a_(e,t){}var We=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var Xc=(()=>{let t=class t extends ou{constructor(r,i,s,o,a,c,l,u){super(),this._elementRef=r,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=a,this._ngZone=c,this._overlayRef=l,this._focusMonitor=u,this._platform=bt(Il),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=bt(Ze),this.attachDomPortal=h=>{this._portalOutlet.hasAttached();let d=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),d},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(r){this._ariaLabelledByQueue.push(r),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(r){let i=this._ariaLabelledByQueue.indexOf(r);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(r);return this._contentAttached(),i}attachTemplatePortal(r){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(r);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(r,i){this._interactivityChecker.isFocusable(r)||(r.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{r.removeEventListener("blur",s),r.removeEventListener("mousedown",s),r.removeAttribute("tabindex")};r.addEventListener("blur",s),r.addEventListener("mousedown",s)})),r.focus(i)}_focusByCssSelector(r,i){let s=this._elementRef.nativeElement.querySelector(r);s&&this._forceFocus(s,i)}_trapFocus(){let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let r=this._config.restoreFocus,i=null;if(typeof r=="string"?i=this._document.querySelector(r):typeof r=="boolean"?i=r?this._elementFocusedBeforeDialogWasOpened:null:r&&(i=r),this._config.restoreFocus&&i&&typeof i.focus=="function"){let s=qr(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let r=this._elementRef.nativeElement,i=qr();return r===i||r.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=qr()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};t.\u0275fac=function(i){return new(i||t)(C(te),C(jr),C(Lr,8),C(We),C(Br),C(Ot),C(rn),C(Ur))},t.\u0275cmp=ht({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,s){if(i&1&&en(qn,7),i&2){let o;ne(o=re())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,s){i&2&&wt("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[tn,dt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,s){i&1&&he(0,a_,0,0,"ng-template",0)},dependencies:[qn],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let e=t;return e})(),kr=class{constructor(t,n){this.overlayRef=t,this.config=n,this.closed=new ft,this.disableClose=n.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!xe(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(t,n){if(this.containerInstance){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(t),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",n=""){return this.overlayRef.updateSize({width:t,height:n}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},c_=new nt("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=bt(St);return()=>e.scrollStrategies.block()}}),l_=new nt("DialogData"),u_=new nt("DefaultDialogConfig");var h_=0,Jc=(()=>{let t=class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(r,i,s,o,a,c){this._overlay=r,this._injector=i,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ft,this._afterOpenedAtThisLevel=new ft,this._ariaHiddenElements=new Map,this.afterAllClosed=Ye(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(kt(void 0))),this._scrollStrategy=c}open(r,i){let s=this._defaultOptions||new We;i=Jt(Jt({},s),i),i.id=i.id||`cdk-dialog-${h_++}`,i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),a=this._overlay.create(o),c=new kr(a,i),l=this._attachContainer(a,c,i);return c.containerInstance=l,this._attachDialogContent(r,c,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.closed.subscribe(()=>this._removeOpenDialog(c,!0)),this.afterOpened.next(c),c}closeAll(){Hc(this.openDialogs,r=>r.close())}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){Hc(this._openDialogsAtThisLevel,r=>{r.config.closeOnDestroy===!1&&this._removeOpenDialog(r,!1)}),Hc(this._openDialogsAtThisLevel,r=>r.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(r){let i=new du({positionStrategy:r.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:r.scrollStrategy||this._scrollStrategy(),panelClass:r.panelClass,hasBackdrop:r.hasBackdrop,direction:r.direction,minWidth:r.minWidth,minHeight:r.minHeight,maxWidth:r.maxWidth,maxHeight:r.maxHeight,width:r.width,height:r.height,disposeOnNavigation:r.closeOnNavigation});return r.backdropClass&&(i.backdropClass=r.backdropClass),i}_attachContainer(r,i,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:We,useValue:s},{provide:kr,useValue:i},{provide:rn,useValue:r}],c;s.container?typeof s.container=="function"?c=s.container:(c=s.container.type,a.push(...s.container.providers(s))):c=Xc;let l=new Fs(c,s.viewContainerRef,Nt.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return r.attach(l).instance}_attachDialogContent(r,i,s,o){if(r instanceof ll){let a=this._createInjector(o,i,s,void 0),c={$implicit:o.data,dialogRef:i};o.templateContext&&(c=Jt(Jt({},c),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new su(r,null,c,a))}else{let a=this._createInjector(o,i,s,this._injector),c=s.attachComponentPortal(new Fs(r,o.viewContainerRef,a,o.componentFactoryResolver));i.componentRef=c,i.componentInstance=c.instance}}_createInjector(r,i,s,o){let a=r.injector||r.viewContainerRef?.injector,c=[{provide:l_,useValue:r.data},{provide:kr,useValue:i}];return r.providers&&(typeof r.providers=="function"?c.push(...r.providers(i,r,s)):c.push(...r.providers)),r.direction&&(!a||!a.get(Mn,null,{optional:!0}))&&c.push({provide:Mn,useValue:{value:r.direction,change:Or()}}),Nt.create({parent:a||o,providers:c})}_removeOpenDialog(r,i){let s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let r=this._overlayContainer.getContainerElement();if(r.parentElement){let i=r.parentElement.children;for(let s=i.length-1;s>-1;s--){let o=i[s];o!==r&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}};t.\u0275fac=function(i){return new(i||t)(q(St),q(Nt),q(u_,8),q(t,12),q(Qr),q(c_))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Hc(e,t){let n=e.length;for(;n--;)t(e[n])}var Lm=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=vt({providers:[Jc],imports:[sn,Bn,Al,Bn]});let e=t;return e})();function d_(e,t){}var Vr=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},Zc="mdc-dialog--open",qm="mdc-dialog--opening",Bm="mdc-dialog--closing",m_=150,f_=75,g_=(()=>{let t=class t extends Xc{constructor(r,i,s,o,a,c,l,u,h){super(r,i,s,o,a,c,l,h),this._animationMode=u,this._animationStateChanged=new ue,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?Um(this._config.enterAnimationDuration)??m_:0,this._exitAnimationDuration=this._animationsEnabled?Um(this._config.exitAnimationDuration)??f_:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(jm,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(qm,Zc)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Zc),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Zc),this._animationsEnabled?(this._hostElement.style.setProperty(jm,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Bm)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(r){this._actionSectionCount+=r,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(qm,Bm)}_waitForAnimationToComplete(r,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,r)}_requestAnimationFrame(r){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(r):r()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(r){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(r){let i=super.attachComponentPortal(r);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}};t.\u0275fac=function(i){return new(i||t)(C(te),C(jr),C(Lr,8),C(Vr),C(Br),C(Ot),C(rn),C(Nn,8),C(Ur))},t.\u0275cmp=ht({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,s){i&2&&(Ps("id",s._config.id),wt("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),ee("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[tn,dt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1),he(2,d_,0,0,"ng-template",2),B()())},dependencies:[qn],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let e=t;return e})(),jm="--mat-dialog-transition-duration";function Um(e){return e==null?null:typeof e=="number"?e:e.endsWith("ms")?Ns(e.substring(0,e.length-2)):e.endsWith("s")?Ns(e.substring(0,e.length-1))*1e3:e==="0"?0:null}var ds=function(e){return e[e.OPEN=0]="OPEN",e[e.CLOSING=1]="CLOSING",e[e.CLOSED=2]="CLOSED",e}(ds||{}),Ie=class{constructor(t,n,r){this._ref=t,this._containerInstance=r,this._afterOpened=new ft,this._beforeClosed=new ft,this._state=ds.OPEN,this.disableClose=n.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Zt(i=>i.state==="opened"),be(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Zt(i=>i.state==="closed"),be(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Xe(this.backdropClick(),this.keydownEvents().pipe(Zt(i=>i.keyCode===27&&!this.disableClose&&!xe(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),p_(this,i.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Zt(n=>n.state==="closing"),be(1)).subscribe(n=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=ds.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let n=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?n.left(t.left):n.right(t.right):n.centerHorizontally(),t&&(t.top||t.bottom)?t.top?n.top(t.top):n.bottom(t.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",n=""){return this._ref.updateSize(t,n),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=ds.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function p_(e,t,n){return e._closeInteractionType=t,e.close(n)}var __=new nt("MatMdcDialogData"),y_=new nt("mat-mdc-dialog-default-options"),v_=new nt("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let e=bt(St);return()=>e.scrollStrategies.block()}});var w_=0,ms=(()=>{let t=class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let r=this._parentDialog;return r?r._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(r,i,s,o,a,c,l,u){this._overlay=r,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ft,this._afterOpenedAtThisLevel=new ft,this.dialogConfigClass=Vr,this.afterAllClosed=Ye(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(kt(void 0))),this._dialog=i.get(Jc),this._dialogRefConstructor=Ie,this._dialogContainerType=g_,this._dialogDataToken=__}open(r,i){let s;i=Jt(Jt({},this._defaultOptions||new Vr),i),i.id=i.id||`mat-mdc-dialog-${w_++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(r,nl(Jt({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:We,useValue:i}]},templateContext:()=>({dialogRef:s}),providers:(a,c,l)=>(s=new this._dialogRefConstructor(a,i,l),s.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:c.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(r){return this.openDialogs.find(i=>i.id===r)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(r){let i=r.length;for(;i--;)r[i].close()}};t.\u0275fac=function(i){return new(i||t)(q(St),q(Nt),q(yl,8),q(y_,8),q(v_),q(t,12),q(Qr),q(Nn,8))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),I_=0;var zm=(()=>{let t=class t{constructor(r,i,s){this._dialogRef=r,this._elementRef=i,this._dialog=s}ngOnInit(){this._dialogRef||(this._dialogRef=T_(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}};t.\u0275fac=function(i){return new(i||t)(C(Ie,8),C(te),C(ms))},t.\u0275dir=Je({type:t,standalone:!0});let e=t;return e})(),fs=(()=>{let t=class t extends zm{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${I_++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}};t.\u0275fac=(()=>{let r;return function(s){return(r||(r=As(t)))(s||t)}})(),t.\u0275dir=Je({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,s){i&2&&Ps("id",s.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[tn]});let e=t;return e})(),gs=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=Je({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0});let e=t;return e})(),ps=(()=>{let t=class t extends zm{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}};t.\u0275fac=(()=>{let r;return function(s){return(r||(r=As(t)))(s||t)}})(),t.\u0275dir=Je({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,s){i&2&&ee("mat-mdc-dialog-actions-align-start",s.align==="start")("mat-mdc-dialog-actions-align-center",s.align==="center")("mat-mdc-dialog-actions-align-end",s.align==="end")},inputs:{align:"align"},standalone:!0,features:[tn]});let e=t;return e})();function T_(e,t){let n=e.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?t.find(r=>r.id===n.id):null}var _s=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=vt({providers:[ms],imports:[Lm,sn,Bn,Ct,Ct]});let e=t;return e})();var ys=(()=>{let t=class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(r){this._vertical=Vs(r)}get inset(){return this._inset}set inset(r){this._inset=Vs(r)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=ht({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(i,s){i&2&&(wt("aria-orientation",s.vertical?"vertical":"horizontal"),ee("mat-divider-vertical",s.vertical)("mat-divider-horizontal",!s.vertical)("mat-divider-inset",s.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[dt],decls:0,vars:0,template:function(i,s){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0});let e=t;return e})(),vs=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=vt({imports:[Ct,Ct]});let e=t;return e})();var $m=(()=>{let t=class t{constructor(r){this.dialogRef=r,this.title="",this.message=""}};t.\u0275fac=function(i){return new(i||t)(C(Ie))},t.\u0275cmp=ht({type:t,selectors:[["app-confirm-dialog"]],standalone:!0,features:[dt],decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["type","button","mat-raised-button","",3,"click"],["type","button","mat-button","",3,"click"]],template:function(i,s){i&1&&(L(0,"h3",0),It(1),B(),L(2,"p",1),It(3),B(),Mt(4,"mat-divider"),L(5,"div",2)(6,"button",3),At("click",function(){return s.dialogRef.close(!0)}),It(7,"OK"),B(),L(8,"button",4),At("click",function(){return s.dialogRef.close(!1)}),It(9,"Cancel"),B()()),i&2&&(rt(),de(s.title),rt(2),pl(" ",s.message," "))},dependencies:[_s,fs,ps,gs,vs,ys,Gr,zr],encapsulation:2});let e=t;return e})();var Km=(()=>{let t=class t{constructor(r){this.dialogRef=r,this.title="",this.message=""}};t.\u0275fac=function(i){return new(i||t)(C(Ie))},t.\u0275cmp=ht({type:t,selectors:[["app-message-dialog"]],standalone:!0,features:[dt],decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["type","button","mat-raised-button","",3,"click"]],template:function(i,s){i&1&&(L(0,"h3",0),It(1),B(),L(2,"p",1),It(3),B(),Mt(4,"mat-divider"),L(5,"div",2)(6,"button",3),At("click",function(){return s.dialogRef.close(!0)}),It(7,"OK"),B()()),i&2&&(rt(),de(s.title),rt(2),de(s.message))},dependencies:[_s,fs,ps,gs,vs,ys,Gr,zr],encapsulation:2});let e=t;return e})();var Qm=(()=>{let t=class t{constructor(r){this.dialog=r}confirm(r,i){return y(this,null,function*(){let s;return s=this.dialog.open($m),s.componentInstance.title=r,s.componentInstance.message=i,s.afterClosed().toPromise()})}message(r,i){return y(this,null,function*(){let s;return s=this.dialog.open(Km),s.componentInstance.title=r,s.componentInstance.message=i,s.afterClosed().toPromise()})}};t.\u0275fac=function(i){return new(i||t)(q(ms))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Vw=(()=>{let t=class t{constructor(r){this.ds=r}canDeactivate(r){return y(this,null,function*(){return r.canDeactivate()?!0:yield this.ds.confirm(" Unsaved changes",`You have unsaved changes.  
 Press Cancel to go back and save these changes, or OK to lose these changes.`)})}};t.\u0275fac=function(i){return new(i||t)(q(Qm))},t.\u0275prov=Vt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();export{ys as a,vs as b,Wc as c,Qe as d,pv as e,_v as f,yv as g,vv as h,xm as i,wv as j,Iv as k,Tv as l,Qm as m,e0 as n,n0 as o,f0 as p,g0 as q,x0 as r,Vw as s};
