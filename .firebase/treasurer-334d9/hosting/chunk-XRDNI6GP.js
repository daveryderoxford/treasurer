import{o as it,p as ot,q as gt,r as dt,s as mt}from"./chunk-ZD3TVNPT.js";import{$ as c,Ab as _,Bb as tt,Cb as et,Db as st,Hb as nt,Ib as rt,Jb as lt,Kb as at,Lb as ct,Qa as q,S as V,T as L,Ta as K,W as A,Y as N,_ as R,ba as T,ca as B,da as U,e as k,fa as f,ga as O,h as S,ha as P,ia as $,ja as G,ma as y,pb as Y,qb as z,rb as W,sb as J,tb as X,ub as Z,zb as Q}from"./chunk-YGAWG4U5.js";import{Bb as H,Db as p,Gb as D,Lc as E,Mb as r,Nb as i,Nc as j,Ob as o,Ub as F,dc as l,e as C,gb as h,hb as x,kc as b,la as I,ma as d,r as w,sb as M,wa as m}from"./chunk-NXMLWIY6.js";var ft=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d({type:t}),t.\u0275inj=m({imports:[st]});let e=t;return e})();function ht(e,t){e&1&&o(0,"mat-progress-bar",11)}var a,u=(a=class{constructor(t,g,s){this.afAuth=t,this.router=g,this.usd=s,this.originalUserData=null,this.bankACReg="",this.sortCodeReg="",this.userForm=new U({name:new f("",{validators:[c.required]}),email:new f("",{validators:[c.email,c.required]}),bankAccountHolder:new f("",{validators:[]}),bankAccountNo:new f(null,{validators:[c.pattern(this.bankACReg)]}),bankSortCode:new f("",{validators:[c.pattern(this.sortCodeReg)]})}),this.showProgressBar=!1,this.busy=!1,this.cardclass="mat-card-mobile",M(()=>{let n=s.user();n&&(this.userForm.reset(),this.userForm.patchValue(n))})}ngOnInit(){K(this.afAuth).pipe(z(this)).subscribe(t=>this.loginChanged(t))}loginChanged(t){t||this.router.navigate(["/"])}save(){return C(this,null,function*(){this.busy=!0;try{yield this.usd.updateDetails(this.userForm.value),console.log("UserComponnet: User results saved")}finally{this.busy=!1,this.router.navigate(["/"])}})}canDeactivate(){return!this.userForm.dirty}},a.\u0275fac=function(g){return new(g||a)(x(q),x(k),x(dt))},a.\u0275cmp=I({type:a,selectors:[["app-user"]],standalone:!0,features:[b],decls:30,vars:5,consts:[["fxLayout","row","fxLayoutAlign","center space-around"],["fxLayout","column","fxLayoutAlign","space-around center","fxLayoutGap","10px"],["novalidate","","fxLayout","column","fxLayoutAlign","space-around","fxLayoutGap","10px",3,"formGroup","ngSubmit"],["mode","query",4,"ngIf"],["matInput","","required","","formControlName","name"],["matInput","","required","","formControlName","email"],["matInput","","required","","formControlName","bankAccountHolder"],["matInput","","required","","formControlName","bankAccountNo"],["matInput","","required","","formControlName","bankSortCode"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-raised-button","","color","primary","type","submit","aria-label","login",3,"disabled"],["mode","query"]],template:function(g,s){g&1&&(r(0,"app-toolbar"),l(1,"User details"),i(),r(2,"div",0)(3,"div",1)(4,"mat-card")(5,"form",2),F("ngSubmit",function(){return s.save()}),H(6,ht,1,0,"mat-progress-bar",3),r(7,"mat-form-field")(8,"mat-label"),l(9,"Name"),i(),o(10,"input",4),i(),r(11,"mat-form-field")(12,"mat-label"),l(13,"Email"),i(),o(14,"input",5),i(),r(15,"mat-form-field")(16,"mat-label"),l(17,"Bank account holder"),i(),o(18,"input",6),i(),r(19,"mat-form-field")(20,"mat-label"),l(21,"Bank account number"),i(),o(22,"input",7),i(),r(23,"mat-form-field")(24,"mat-label"),l(25,"Bank account sort code"),i(),o(26,"input",8),i(),r(27,"div",9)(28,"button",10),l(29,"Save"),i()()()()()()),g&2&&(h(4),D(s.cardclass),h(),p("formGroup",s.userForm),h(),p("ngIf",s.showProgressBar),h(22),p("disabled",s.userForm.invalid||!s.userForm.dirty))},dependencies:[W,at,lt,rt,nt,X,J,y,O,R,T,B,G,P,$,E,gt,ot,_,Q,Z,et,tt,A,L,N,ft,it,V],styles:["mat-card[_ngcontent-%COMP%]{max-width:300px!important;width:100vw!important;min-width:150px!important}"]}),a);u=w([Y()],u);var xt=[{path:"",component:u,canActivate:[ct],canDeactivate:[mt]}],ut=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d({type:t}),t.\u0275inj=m({imports:[S.forChild(xt),S]});let e=t;return e})();var Ce=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d({type:t}),t.\u0275inj=m({imports:[j,ut,y,u]});let e=t;return e})();export{Ce as UserModule};
